# 🌊 Jiji開発計画書 v2.8 - アーキテクチャ刷新・完全B2B収益モデル版
**【LINE Bot完結型・Web知識ベース・口コミ重視マッチング実装】**

## 📋 **重要アップデート内容（v2.7→v2.8）**

### ✅ **根本的アーキテクチャ刷新**
- **システム構成変更**: マルチチャネル統合 → **LINE Bot完結型**
- **Web役割変更**: ユーザー向け分析UI → **知識ベース・情報ソース**
- **収益モデル変更**: ユーザー課金 → **完全B2B収益化**
- **マッチング重み**: 口コミ70% → **口コミ50%・基本30%・プラン20%**

---

## 🎯 **新システムアーキテクチャ**

### 🔄 **LINE Bot完結型設計**

#### **メインフロー**
```
ユーザー(LINE) → Jiji(AI) → Web知識ベース参照 → 自然な回答(LINE)
```

#### **技術実装フロー**
```javascript
class JijiAIAgent {
    async processUserMessage(message, userContext) {
        // Step 1: 意図・エンティティ分析
        const analysis = await this.analyzeUserIntent(message);
        
        // Step 2: Web知識ベース参照
        const webData = await this.gatherWebKnowledge(analysis);
        
        // Step 3: 統合・自然回答生成
        const response = await this.generateNaturalResponse(webData, userContext);
        
        return response;
    }
    
    async gatherWebKnowledge(analysis) {
        const knowledge = {};
        
        // 店舗データベース参照
        if (analysis.intent.includes('shop')) {
            knowledge.shops = await this.queryShopDatabase(analysis.entities);
            knowledge.reviews = await this.getRelevantReviews(knowledge.shops);
        }
        
        // 旅行ガイド参照
        if (analysis.intent.includes('travel')) {
            knowledge.travelInfo = await this.getTravelGuide(analysis.entities.area);
        }
        
        // 海況・天気情報参照
        if (analysis.intent.includes('weather')) {
            knowledge.weatherInfo = await this.getWeatherData(analysis.entities.area);
        }
        
        // ダイビングブログ参照
        if (analysis.intent.includes('guide')) {
            knowledge.blogPosts = await this.getBlogContent(analysis.entities);
        }
        
        return knowledge;
    }
}
```

### 🌐 **Web知識ベース構造**

#### **情報カテゴリ・ページ構成**
```
🌐 Webサイト構造（LINE Bot知識ベース特化）

/data（構造化データ - API用）
├── shops.json（79店舗×34項目完全データ）
├── reviews.json（口コミ・評価データ）
├── travel-info.json（旅行・宿泊・交通情報）
├── weather-data.json（天気・海況データ）
└── guides.json（ダイビングガイド・FAQ）

/shops-database（店舗情報ページ）
├── /ishigaki（石垣島44店舗詳細）
├── /miyako（宮古島35店舗詳細）
├── /okinawa-main（沖縄本島店舗詳細）
├── /other-islands（その他離島-与那国、多良間、阿嘉、粟国、となき、久米、伊平屋、伊是名、伊江など）
├── /shop-reviews（口コミ一覧・投稿）
└── /shop-comparison（比較・検索）

/travel-guide（旅行計画情報）
├── /ishigaki-travel（石垣島旅行ガイド）
├── /miyako-travel（宮古島旅行ガイド）
├── /okinawa-main-travel（沖縄本島旅行ガイド）
├── /other-islands-travel（その他離島旅行ガイド）
├── /budget-planning（予算プラン・節約術）
├── /transportation（航空券・交通手段）
└── /accommodation（宿泊施設情報）

/diving-blog（ダイビングブログ）
├── /beginner-stories（初心者体験談・ストーリー）
├── /safety-awareness（安全意識・注意喚起記事）
├── /equipment-introduction（器材紹介・レビュー記事）
├── /season-experience（季節別体験レポート）
├── /qa-collection（よくある質問・体験談集）
└── /guest-posts（ゲスト投稿・プロダイバー記事）

/weather-ocean（海況・天気情報）
├── /current-conditions（現在の海況・天気）
├── /weekly-forecast（週間天気・海況予報）
├── /seasonal-trends（季節別海況・ベストタイミング）
├── /weather-history（過去の天気・海況データ）
└── /emergency-info（台風・悪天候時の対応）

/member（会員専用）
├── /register（会員登録）
├── /mypage（マイページ・ポイント管理）
├── /review-post（口コミ投稿）
└── /point-exchange（ポイント交換）
```

---

## 💰 **完全B2B収益モデル**

### 🏪 **ショップ向け課金プラン**

#### **料金体系**
```
🆓 ベーシックプラン (¥0/月)
├── 基本店舗情報掲載
├── 通常のマッチング対象
├── 基本的な特徴項目（15項目）
├── ユーザー口コミ表示
├── 標準的な表示順位
└── バッジなし

⭐ スタンダードプラン (¥3,000/月)
├── 詳細店舗情報掲載
├── 検索結果優遇表示
├── 拡張特徴項目（25項目）
├── 口コミへの返信機能
├── 月間レポート（問い合わせ数・傾向）
├── 写真ギャラリー機能（10枚まで）
├── 季節キャンペーン掲載
├── 「Jiji推薦店」シルバーバッジ
└── Jiji推薦時の詳細説明

🌟 プレミアムプラン (¥5,000/月)
├── 最上位表示・推薦優遇
├── 全特徴項目（34項目）フル活用
├── 口コミ分析・改善提案
├── 詳細分析レポート（週次・月次）
├── 写真・動画ギャラリー（無制限）
├── リアルタイム問い合わせ通知
├── A/Bテスト・最適化サポート
├── 「Jijiプレミアム認定」ゴールドバッジ
├── 優先的なJiji推薦・口コミ強調
└── 専用サポート・改善コンサル
```

#### **プラン別認定バッジシステム**
```
🌟 プレミアムバッジ:
[🌟 Jijiプレミアム認定 ✨]
- 色: ゴールドグラデーション
- 説明: "最高品質サービス保証"

⭐ スタンダードバッジ:
[⭐ Jiji推薦店 ✓]
- 色: シルバーブルー
- 説明: "安心おすすめショップ"

⚪ ベーシック:
- バッジなし
- 基本情報表示のみ
```

### 🏭 **広告収益**

#### **機材メーカー・旅行関連**
```
📺 ディスプレイ広告:
├── Webサイトバナー広告 (¥50,000/月)
├── LINE Bot内バナー表示 (¥30,000/月)
├── 記事・ガイド内商品紹介 (¥20,000/月)
└── 動画広告・プロモーション (¥100,000/月)

🛍️ 商品紹介・アフィリエイト:
├── 初心者向け器材ガイド掲載
├── Jijiによる商品推薦・説明
├── 購入リンク・アフィリエイト手数料
└── ユーザーレビュー・評価掲載
```

---

## 🤖 **口コミ重視マッチングシステム**

### 📊 **マッチングアルゴリズム**

#### **重み付け構成**
```
🎯 最終マッチングスコア構成:
1. 口コミAI分析スコア: 50%
2. ショップ基本情報適合度: 30%  
3. プラン・認定優遇: 20%
```

#### **口コミAI分析（50%）**
```
📊 口コミスコア構成:
├── 総合口コミ評価: 60%
│   ├── 初心者対応度: 25%
│   ├── 安全性・信頼度: 25%
│   ├── スタッフ対応: 20%
│   ├── 体験満足度: 20%
│   └── コストパフォーマンス: 10%
│
├── ユーザー感情マッチング: 40%
│   ├── 不安カテゴリと口コミ解決実績
│   ├── 求める体験と口コミ体験内容
│   └── 期待レベルと満足度実績
│
└── 口コミ信頼度調整:
    ├── 口コミ数（最低5件で安定）
    ├── 投稿者信頼度
    └── AI分析信頼度
```

#### **ショップ基本情報適合度（30%）**
```
📋 基本適合度構成:
├── エリア適合度: 25%
├── 価格帯適合度: 25%
├── サービス適合度: 25%
└── 特徴適合度: 25%
```

#### **プラン・認定優遇（20%）**
```
💎 プラン別優遇スコア:
├── プレミアム（¥5,000/月）: 100%優遇（+20%フル）
├── スタンダード（¥3,000/月）: 60%優遇（+12%）
└── ベーシック（¥0/月）: 0%優遇（+0%）
```

---

## 🎁 **ユーザーポイントシステム**

### 💎 **ポイント獲得システム**

#### **口コミ関連ポイント（メイン獲得源）**
```
🌟 口コミ投稿ポイント:
├── 体験談投稿（写真なし）: 100ポイント
├── 体験談投稿（写真付き）: 150ポイント
├── 体験談投稿（動画付き）: 200ポイント
├── 詳細レビュー（500文字以上）: +50ポイント
└── 高評価レビュー（AI品質判定）: +30ポイント

🎯 口コミ品質ボーナス:
├── 「役立った」評価10件獲得: +100ポイント
├── 「役立った」評価50件獲得: +300ポイント
├── 月間ベストレビュー選出: +500ポイント
└── Jiji推薦レビュー採用: +200ポイント
```

#### **その他サービス利用ポイント**
```
🌐 サービス利用:
├── 会員登録完了: 100ポイント
├── プロフィール完成: 50ポイント
├── LINE Bot連携: 20ポイント
└── 月間ログイン（5日以上）: 50ポイント

🤝 友達紹介・SNS:
├── 友達紹介成功: 300ポイント
├── SNSシェア: 20ポイント
└── Jiji公式SNSフォロー: 30ポイント
```

### 🎁 **ポイント交換システム**

#### **交換可能特典**
```
🤿 ダイビング関連:
├── 体験ダイビング無料チケット: 3,000ポイント
├── ライセンス講習割引券（30%OFF）: 2,500ポイント
├── ファンダイビング割引券（20%OFF）: 1,500ポイント
└── 器材レンタル無料券: 800ポイント

🛍️ 器材・グッズ:
├── 高品質マスク・フィン・スノーケル: 4,000ポイント
├── 防水カメラ・GoPro: 8,000ポイント
├── Jijiオリジナルグッズ: 300-800ポイント
└── ダイビングログブック: 600ポイント

✈️ 旅行・宿泊:
├── 沖縄往復航空券割引（10,000円OFF）: 5,000ポイント
├── ダイビング民宿・ゲストハウス宿泊券: 2,000ポイント
└── レンタカー割引券（30%OFF）: 1,500ポイント
```

---

## 👤 **会員システム（LINE連携必須）**

### 📝 **会員登録フロー**
```
1. WebサイトでLINE連携ログイン（必須）
2. LINE Bot友達追加確認
3. 基本プロフィール・ダイビング経験入力
4. 登録完了 → 100ポイント付与
```

### 🌐 **マイページ機能**
```
/mypage (会員専用ページ)
├── プロフィール・設定管理
├── ポイント残高・獲得履歴
├── 投稿した口コミ・レビュー管理
├── 保存したショップ・プラン
├── 利用履歴・マッチング結果
├── 友達紹介・招待コード
├── ポイント交換・特典申請
└── 通知・メッセージ設定
```

---

## 💬 **口コミ投稿システム**

### 🏪 **ショップ選択システム**

#### **3段階選択フロー**
```
🌐 /review-post (口コミ投稿ページ)
├── Step 1: 地域選択
│   ├── 石垣島エリア（44店舗）
│   ├── 宮古島エリア（35店舗）
│   └── その他エリア
│
├── Step 2: ショップ検索・選択
│   ├── 検索窓（リアルタイム絞り込み）
│   ├── ショップリスト表示（マークダウン形式）
│   ├── ショップ詳細プレビュー
│   └── 選択確定ボタン
│
└── Step 3: 体験コース・プラン選択
    ├── 選択ショップの提供コース表示
    ├── 体験ダイビング・ライセンス・ファンダイブ
    └── 参加コース確定
```

#### **マークダウン風ショップリスト**
```html
<!-- ショップリスト表示例 -->
<div class="shop-markdown-list">
    <!-- プレミアム店舗 -->
    <div class="shop-tier tier-premium">
        <h4>🌟 Jijiプレミアム認定ショップ</h4>
        <ul class="shop-items">
            <li class="shop-item" data-shop-id="ISH001">
                <input type="radio" name="selected-shop" value="ISH001">
                <label>
                    <strong>S2クラブ石垣</strong>
                    <span class="badge premium">🌟 プレミアム認定</span>
                    <p>マンタ遭遇率95%、初心者専門指導20年の実績</p>
                </label>
            </li>
        </ul>
    </div>
    
    <!-- スタンダード店舗 -->
    <div class="shop-tier tier-standard">
        <h4>⭐ Jiji推薦店</h4>
        <!-- 店舗リスト -->
    </div>
    
    <!-- ベーシック店舗 -->
    <div class="shop-tier tier-basic">
        <h4>✨ 基本掲載ショップ</h4>
        <!-- 店舗リスト -->
    </div>
</div>
```

### 📝 **口コミ投稿フォーム**
```
🌐 口コミ投稿内容:
├── 体験情報入力
│   ├── 体験日・時間帯・天候
│   ├── 参加コース・プラン
│   └── 同行者情報
│
├── 評価・スコア入力
│   ├── 総合満足度（5段階）
│   ├── カテゴリ別評価（5段階）
│   │   ├── 初心者対応度
│   │   ├── 安全性・信頼度  
│   │   ├── スタッフ対応・親切度
│   │   ├── 体験内容・満足度
│   │   └── コストパフォーマンス
│   └── 推薦度（友人に薦めるか？）
│
├── 詳細体験談
│   ├── 良かった点・印象的だった体験
│   ├── 改善希望点・注意点
│   ├── 初心者へのアドバイス
│   └── 全体的な感想・メッセージ
│
└── メディア投稿
    ├── 写真アップロード（最大10枚）
    ├── 動画アップロード（最大3分）
    └── 獲得予定ポイント表示
```

---

## 🛠️ **既存システムとの関係**

### ✅ **継続活用するもの**
```
├── 79店舗×34項目データベース（完全活用）
├── 6カテゴリ感情分析エンジン（LINE Bot内部処理）
├── Railway本番環境・LINE Bot基盤（継続）
├── Jijiキャラクター応答システム（継続）
└── OpenAI統合システム（継続）
```

### 🔄 **調整・リファクタリング**
```
├── Web App感情分析UI → 削除
├── マルチチャネル体験 → LINE Bot単体集約
├── ユーザー向けマッチングページ → 管理者用に変更
├── API応答 → Web知識ベース参照型に調整
└── マッチングアルゴリズム重み → 50/30/20に調整
```

### ✅ **新規追加**
```
├── Web知識ベース・情報ページ群
├── 会員登録・ポイント管理システム
├── 口コミ投稿・表示システム
├── ショップ向けダッシュボード
├── 広告・収益化システム
└── 海況・天気情報システム
```

---

## 📈 **収益予測・目標設定**

### 💰 **月間収益目標**

#### **ショップ収益（79店舗ベース）**
```
🎯 保守的予測（6ヶ月後）:
├── ベーシック: 45店舗 × ¥0 = ¥0
├── スタンダード: 25店舗 × ¥3,000 = ¥75,000
├── プレミアム: 9店舗 × ¥5,000 = ¥45,000
└── 月間合計: ¥120,000

🎯 成長目標（12ヶ月後）:
├── ベーシック: 35店舗 × ¥0 = ¥0
├── スタンダード: 30店舗 × ¥3,000 = ¥90,000
├── プレミアム: 14店舗 × ¥5,000 = ¥70,000
└── 月間合計: ¥160,000
```

#### **広告収益**
```
🎯 機材メーカー・旅行関連広告:
├── バナー・記事広告: ¥500,000/月
├── LINE Bot統合広告: ¥200,000/月
├── キャンペーン・特集: ¥300,000/月
└── 月間合計: ¥1,000,000
```

#### **総合収益目標**
```
🎯 Phase 1（6ヶ月後）:
├── ショップ収益: ¥120,000/月（12%）
├── 広告収益: ¥800,000/月（80%）
├── その他: ¥80,000/月（8%）
└── 月間総収益: ¥1,000,000

🎯 Phase 2（12ヶ月後）:
├── ショップ収益: ¥160,000/月（11%）
├── 広告収益: ¥1,200,000/月（80%）
├── その他: ¥140,000/月（9%）
└── 月間総収益: ¥1,500,000
```

---

## 📅 **実装フェーズ計画**

### 🚀 **Phase 6-A: アーキテクチャ刷新（1週間）**

#### **Task 1: LINE Bot応答システム調整**
```
1. Web知識ベース参照システム実装
2. 既存感情分析UIの削除・調整
3. Jiji応答フローの知識ベース統合
4. マルチチャネル機能の単体化
```

#### **Task 2: Web知識ベース構築**
```
1. /shops-database ページ群構築
2. /travel-guide 情報ページ作成
3. /diving-blog ブログシステム実装
4. /weather-ocean 海況・天気情報実装
```

### 🚀 **Phase 6-B: 会員・ポイントシステム（1週間）**

#### **Task 1: 会員システム実装**
```
1. LINE連携ログイン実装
2. 会員登録・プロフィール管理
3. マイページ・ダッシュボード構築
4. ポイント管理システム実装
```

#### **Task 2: 口コミ投稿システム実装**
```
1. ショップ選択UI（マークダウン風）実装
2. 口コミ投稿フォーム作成
3. AI口コミ分析システム統合
4. ポイント付与システム統合
```

### 🚀 **Phase 6-C: 収益化システム（1週間）**

#### **Task 1: ショップ向けプラン実装**
```
1. プラン別認定バッジシステム
2. ショップ管理ダッシュボード
3. マッチングアルゴリズム調整（50/30/20）
4. 表示差別化システム実装
```

#### **Task 2: 広告システム実装**
```
1. 広告枠・表示システム
2. アフィリエイト統合
3. 効果測定・レポート機能
4. 課金・請求管理システム
```

---

## 🎯 **成功指標・KPI**

### 📊 **技術指標**
```
✅ LINE Bot応答時間: 3秒以内維持
✅ Web知識ベース読み込み: 2秒以内
✅ システム稼働率: 99%以上
✅ API成功率: 99.5%以上
✅ 口コミ投稿成功率: 95%以上
```

### 📊 **ビジネス指標**
```
✅ 口コミ投稿数: 月間50件以上（6ヶ月後）
✅ 会員登録数: 月間100名以上（6ヶ月後）
✅ ショップ課金率: 43%以上（34店舗/79店舗）
✅ ユーザーリピート率: 70%以上
✅ 収益目標: ¥1,000,000/月（6ヶ月後）
```

---

## 📅 **最終更新情報**

### 📋 **ドキュメント管理**
```
📅 作成日: 2025年7月5日
📅 最終更新: 2025年7月15日
📝 更新者: Claude Code & Claude Chat 連携
🔄 バージョン: v2.8（アーキテクチャ刷新・完全B2B収益モデル版）
📝 次回更新予定: Phase 6完了時

📊 更新履歴:
- v2.7: Phase 4完全完了・マルチチャネル統合実現版
- v2.8: アーキテクチャ刷新・LINE Bot完結型・B2B収益化版

🔗 関連ドキュメント:
- サービス企画・UX設計ナレッジ v2.8
- Phase 6実装作業指示書
```

### 🎯 **プロジェクト状況サマリー**
```
現在状態: v2.7マルチチャネル → v2.8 LINE Bot完結型刷新
実装方針: 既存システム調整 + 新規機能追加
収益モデル: ユーザー課金廃止 → 完全B2B収益化
次段階: Phase 6-A アーキテクチャ刷新開始

技術的成果: LINE Bot + Web知識ベース統合設計完成
ビジネス価値: 持続可能なB2B収益モデル確立
開発手法: 既存資産活用・効率的刷新
社会的影響: 初心者ダイバー支援・口コミ重視品質向上
```

---

**🌊 Jijiプロジェクトは v2.8 により真の目的である「LINE Bot完結型・初心者ダイバー支援システム」として生まれ変わり、持続可能なB2B収益モデルと口コミ重視のマッチングシステムにより、初心者ダイバーの『できない』を『できる』に変える魔法の存在として完成します。✨**