<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ·æ³ãƒ»å¤©æ°—æƒ…å ± | Dive Buddy's</title>
    <meta name="description" content="æ²–ç¸„ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æµ·æ³ãƒ»å¤©æ°—æƒ…å ±ã€‚3æ—¥é–“è©³ç´°äºˆå ±ã¨ãƒ€ã‚¤ãƒ“ãƒ³ã‚°é©æ€§ã‚’è‡ªå‹•åˆ¤å®šã€‚çŸ³å£å³¶ãƒ»å®®å¤å³¶ãƒ»æ²–ç¸„æœ¬å³¶ãƒ»æ…¶è‰¯é–“è«¸å³¶å¯¾å¿œã€‚å°é¢¨æƒ…å ±ãƒ»è­¦å ±ã‚‚ã€‚">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- çµ±ä¸€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ  -->
    <link rel="stylesheet" href="/css/design-system.css">
    <link rel="stylesheet" href="../app/v28-styles.css">
    
    <style>
        :root {
            --ocean-blue: #4A90A4;
            --coral-pink: #FF6B9D;
            --mint-green: #4ECDC4;
            --soft-white: #FFF8F5;
            --deep-navy: #2C3E50;
            --sunset-peach: #FFAB91;
        }

        .weather-header {
            background: linear-gradient(135deg, var(--ocean-blue) 0%, #0284c7 100%);
            color: white;
            padding: 80px 0 60px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .weather-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><path d="M0,10 Q25,0 50,10 T100,10 L100,20 L0,20 Z" fill="rgba(255,255,255,0.1)"/></svg>') repeat-x;
            background-size: 100px 20px;
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: translateX(0px); }
            50% { transform: translateX(-50px); }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }
        
        .current-conditions {
            padding: 60px 0;
            background: linear-gradient(135deg, var(--soft-white) 0%, #e0f2fe 100%);
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .conditions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .condition-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 245, 0.9));
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .condition-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .diving-status-excellent {
            border-left: 5px solid #10b981;
        }

        .diving-status-good {
            border-left: 5px solid #f59e0b;
        }

        .diving-status-poor {
            border-left: 5px solid #ef4444;
        }
        
        .area-name {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--deep-navy);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .area-icon {
            font-size: 1.2rem;
        }
        
        .weather-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }
        
        .temperature {
            font-size: 2.5rem;
            font-weight: 600;
            color: var(--ocean-blue);
            margin-bottom: 20px;
        }

        .diving-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
        }

        .diving-status-excellent .diving-status {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .diving-status-good .diving-status {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .diving-status-poor .diving-status {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .condition-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .detail-item {
            text-align: center;
        }

        .detail-label {
            font-size: 0.8rem;
            color: #64748b;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .detail-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--deep-navy);
        }

        .diving-score {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            padding: 10px 15px;
            background: linear-gradient(135deg, var(--coral-pink), var(--sunset-peach));
            border-radius: 10px;
            color: white;
        }

        .score-label {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .score-value {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .diving-reasons {
            margin-top: 10px;
        }

        .reasons-text {
            font-size: 0.85rem;
            color: #64748b;
            line-height: 1.4;
            text-align: left;
        }

        /* å°é¢¨æƒ…å ±ã‚¹ã‚¿ã‚¤ãƒ« */
        .typhoon-section {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.3);
        }

        .typhoon-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .typhoon-header i {
            font-size: 2rem;
            animation: spin 4s linear infinite;
        }

        .typhoon-header h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        /* é€±é–“äºˆå ±ã‚¹ã‚¿ã‚¤ãƒ« */
        .forecast-section {
            padding: 60px 0;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .forecast-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .forecast-tab {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid var(--ocean-blue);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
        }

        .forecast-tab.active {
            background: var(--ocean-blue);
            color: white;
        }

        .forecast-tab:hover {
            transform: translateY(-2px);
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .forecast-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 245, 0.9));
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .forecast-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .forecast-date {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: 10px;
        }

        .forecast-weather {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .forecast-temp {
            font-size: 1rem;
            font-weight: 600;
            color: var(--ocean-blue);
            margin-bottom: 12px;
        }

        .forecast-details {
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-size: 0.8rem;
            color: #64748b;
        }

        .diving-score-forecast {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--coral-pink);
            color: white;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* çµ±è¨ˆæƒ…å ±ã‚¹ã‚¿ã‚¤ãƒ« */
        .statistics-section {
            padding: 60px 0;
            background: linear-gradient(135deg, var(--soft-white) 0%, #fef7f7 100%);
        }

        .stats-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stats-tab {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid var(--coral-pink);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
        }

        .stats-tab.active {
            background: var(--coral-pink);
            color: white;
        }

        .stats-tab:hover {
            transform: translateY(-2px);
        }

        .monthly-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .month-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 245, 0.9));
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .month-card:hover {
            transform: translateY(-3px);
        }

        .month-name {
            font-weight: 700;
            color: var(--deep-navy);
            margin-bottom: 10px;
        }

        .month-rating {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .month-score {
            font-weight: 600;
            color: var(--coral-pink);
            font-size: 0.9rem;
        }

        .season-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .season-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 245, 0.9));
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .season-card:hover {
            transform: translateY(-5px);
        }

        .season-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .season-icon {
            font-size: 2rem;
        }

        .season-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--deep-navy);
        }

        .season-period {
            font-size: 0.9rem;
            color: #64748b;
        }

        .season-highlights {
            margin: 20px 0;
        }

        .highlight-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .highlight-icon {
            font-size: 1rem;
            width: 20px;
        }
        
        .status-excellent { background: #10b981; }
        .status-good { background: #3b82f6; }
        .status-fair { background: #f59e0b; }
        .status-poor { background: #ef4444; }
        
        .forecast-section {
            padding: 80px 0;
            background: white;
        }
        
        .forecast-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 40px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .forecast-tab {
            padding: 12px 24px;
            background: #f1f5f9;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .forecast-tab.active {
            background: #0ea5e9;
            color: white;
        }
        
        .forecast-content {
            display: none;
        }
        
        .forecast-content.active {
            display: block;
        }
        
        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .forecast-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: border-color 0.3s ease;
        }
        
        .forecast-card:hover {
            border-color: #0ea5e9;
        }
        
        .forecast-date {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
        }
        
        .forecast-weather {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .forecast-temp {
            font-size: 1.1rem;
            font-weight: 600;
            color: #0ea5e9;
            margin-bottom: 15px;
        }
        
        .forecast-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #64748b;
        }
        
        .seasonal-info {
            padding: 80px 0;
            background: #f0f9ff;
        }
        
        .seasonal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .season-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .season-header {
            padding: 20px;
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            color: white;
            text-align: center;
        }
        
        .season-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .season-period {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .season-content {
            padding: 25px;
        }
        
        .season-features {
            margin-bottom: 20px;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-icon {
            color: #0ea5e9;
            width: 20px;
        }
        
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .pros, .cons {
            padding: 15px;
            border-radius: 8px;
        }
        
        .pros {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
        }
        
        .cons {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
        }
        
        .pros h4, .cons h4 {
            margin-bottom: 10px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .pros h4 { color: #047857; }
        .cons h4 { color: #dc2626; }
        
        .pros ul, .cons ul {
            list-style: none;
            padding: 0;
            font-size: 0.8rem;
        }
        
        .pros li::before {
            content: 'âœ“ ';
            color: #10b981;
            font-weight: bold;
        }
        
        .cons li::before {
            content: 'Ã— ';
            color: #ef4444;
            font-weight: bold;
        }

        /* å°é¢¨è©³ç´°æƒ…å ±ã‚¹ã‚¿ã‚¤ãƒ« */
        .typhoon-details {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
        }

        .typhoon-main-info {
            margin-bottom: 25px;
        }

        .typhoon-main-info h4 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: white;
        }

        .typhoon-message {
            font-size: 1rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }

        .typhoon-data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .typhoon-data-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
        }

        .data-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 5px;
        }

        .data-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
        }

        .typhoon-impact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .impact-area-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid;
        }

        .impact-area-card.low {
            border-left-color: #10b981;
        }

        .impact-area-card.medium {
            border-left-color: #f59e0b;
        }

        .impact-area-card.high {
            border-left-color: #ef4444;
        }

        .impact-area-card.extreme {
            border-left-color: #dc2626;
            background: rgba(220, 38, 38, 0.2);
        }

        .impact-area-card h5 {
            color: white;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .risk-level, .arrival-time, .impact-text {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 5px;
        }

        .typhoon-recommendations {
            background: rgba(220, 38, 38, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .typhoon-recommendations h5 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .typhoon-recommendations ul {
            list-style: none;
            padding: 0;
        }

        .typhoon-recommendations li {
            padding: 5px 0;
            color: rgba(255, 255, 255, 0.9);
            position: relative;
            padding-left: 20px;
        }

        .typhoon-recommendations li::before {
            content: 'âš ï¸';
            position: absolute;
            left: 0;
        }

        .typhoon-update-time {
            text-align: right;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
        }

        /* ãƒ€ã‚¤ãƒ“ãƒ³ã‚°å½±éŸ¿ã‚µãƒãƒªãƒ¼ */
        .diving-impact-summary {
            background: linear-gradient(135deg, rgba(220, 38, 38, 0.9), rgba(153, 27, 27, 0.9));
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.3);
        }

        .diving-impact-summary.restricted-impact {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.9), rgba(217, 119, 6, 0.9));
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }

        .diving-impact-summary.caution-impact {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 0.9));
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .impact-summary-content {
            display: flex;
            align-items: center;
            gap: 20px;
            color: white;
        }

        .impact-icon {
            font-size: 3rem;
            animation: pulse 2s infinite;
        }

        .impact-main-text {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .impact-sub-text {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ã‚¢ãƒ©ãƒ¼ãƒˆè©³ç´°ã‚¹ã‚¿ã‚¤ãƒ« */
        .alert-single, .alert-multiple {
            color: white;
        }

        .alert-diving-impact {
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .alert-areas {
            margin-top: 10px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .alert-item {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .alert-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .alert-item-message {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .alert-item-areas {
            font-size: 0.85rem;
            opacity: 0.8;
        }
        
        .alert-section {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 20px;
            margin: 40px 0;
            display: none;
        }
        
        .alert-section.show {
            display: block;
        }
        
        .alert-title {
            color: #92400e;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-content {
            color: #b45309;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .conditions-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .condition-details {
                grid-template-columns: 1fr;
            }
            
            .forecast-grid {
                grid-template-columns: 1fr;
            }
            
            .pros-cons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="main-header">
        <nav class="main-nav">
            <a href="/" class="main-logo">
                <h1>ğŸŒŠ Jiji</h1>
                <span>çŸ¥è­˜ãƒ™ãƒ¼ã‚¹</span>
            </a>
            
            <ul class="main-nav-menu">
                <li><a href="/">ãƒ›ãƒ¼ãƒ </a></li>
                <li><a href="/shops-database">ã‚·ãƒ§ãƒƒãƒ—DB</a></li>
                <li><a href="/travel-guide">æ—…è¡Œã‚¬ã‚¤ãƒ‰</a></li>
                <li><a href="/diving-blog">ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ãƒ–ãƒ­ã‚°</a></li>
                <li><a href="/weather-ocean" class="active">æµ·æ³ãƒ»å¤©æ°—</a></li>
                <li><a href="/member">ä¼šå“¡ãƒšãƒ¼ã‚¸</a></li>
            </ul>
            
            <div class="main-nav-buttons">
                <a href="https://line.me/ti/p/@2007331165" class="btn btn-primary" target="_blank">
                    <i class="fab fa-line"></i> LINEç›¸è«‡
                </a>
            </div>
        </nav>
    </header>

    <!-- æµ·æ³ãƒ»å¤©æ°—ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <section class="weather-header">
        <div class="container">
            <div class="header-content">
                <div class="live-indicator">
                    <div class="live-dot"></div>
                    <span>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ä¸­</span>
                </div>
                <h1 class="database-title">ğŸŒŠ æµ·æ³ãƒ»å¤©æ°—æƒ…å ±</h1>
                <p class="database-subtitle">
                    æ²–ç¸„ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã®æœ€æ–°æµ·æ³ãƒ»å¤©æ°—æƒ…å ±ã€‚3æ—¥é–“ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã¨7æ—¥é–“äºˆå ±ã§ãƒ™ã‚¹ãƒˆãªãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ—¥ç¨‹ã‚’è¨ˆç”»ã—ã‚ˆã†ã€‚<br>
                    <strong>NEW:</strong> è©³ç´°æµ·æ³ãƒšãƒ¼ã‚¸ã§æ½®æ±ãƒ»é¢¨å‘ãƒ»æ³¢æµªæƒ…å ±ã‚‚ç¢ºèªå¯èƒ½
                </p>
                <div style="margin-top: 20px; font-size: 0.9rem; opacity: 0.9;">
                    <i class="fas fa-clock"></i> æœ€çµ‚æ›´æ–°: <span id="lastUpdate">å–å¾—ä¸­...</span>
                </div>
            </div>
        </div>
    </section>

    <!-- å°é¢¨ãƒ»ç·Šæ€¥ã‚¢ãƒ©ãƒ¼ãƒˆ -->
    <section class="container">
        <div class="alert-section" id="weather-alert" style="display: none;">
            <div class="alert-title">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="alert-title-text">æ°—è±¡è­¦å ±ãƒ»æ³¨æ„å ±</span>
            </div>
            <div class="alert-content" id="alert-content">
                ç¾åœ¨ã€ç‰¹åˆ¥ãªæ°—è±¡è­¦å ±ã‚„æ³¨æ„å ±ã¯ç™ºè¡¨ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
            </div>
        </div>

        <!-- å°é¢¨æƒ…å ± -->
        <div class="typhoon-section" id="typhoon-info" style="display: none;">
            <div class="typhoon-header">
                <i class="fas fa-hurricane"></i>
                <h3>å°é¢¨æƒ…å ±</h3>
            </div>
            <div class="typhoon-content" id="typhoon-content">
                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹å°é¢¨æƒ…å ± -->
            </div>
        </div>
    </section>

    <!-- ç¾åœ¨ã®æµ·æ³ãƒ»å¤©æ°— -->
    <section class="current-conditions">
        <div class="container">
            <h2 class="section-title">ğŸ“Š ç¾åœ¨ã®æµ·æ³ãƒ»å¤©æ°—</h2>
            <p class="section-subtitle">
                å„ã‚¨ãƒªã‚¢ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æµ·æ³ãƒ»å¤©æ°—æƒ…å ±ã¨ãƒ€ã‚¤ãƒ“ãƒ³ã‚°é©æ€§
            </p>
            
            <div class="conditions-grid" id="weatherConditions">
                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹æµ·æ³æƒ…å ± -->
            </div>
        </div>
    </section>

    <!-- é€±é–“äºˆå ± -->
    <section class="forecast-section">
        <div class="container">
            <h2 class="section-title">ğŸ“… é€±é–“äºˆå ±</h2>
            <p class="section-subtitle">
                7æ—¥é–“ã®å¤©æ°—ãƒ»æµ·æ³äºˆå ±ã§ãƒ€ã‚¤ãƒ“ãƒ³ã‚°è¨ˆç”»ã‚’ç«‹ã¦ã‚ˆã†
            </p>
            
            <div class="forecast-tabs">
                <button class="forecast-tab active" data-area="ishigaki">ğŸï¸ çŸ³å£å³¶</button>
                <button class="forecast-tab" data-area="miyako">ğŸŒº å®®å¤å³¶</button>
                <button class="forecast-tab" data-area="okinawa">ğŸ–ï¸ æ²–ç¸„æœ¬å³¶</button>
                <button class="forecast-tab" data-area="kerama">ğŸ¢ æ…¶è‰¯é–“è«¸å³¶</button>
            </div>
            
            <div id="forecastContainer">
                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹é€±é–“äºˆå ± -->
            </div>
        </div>
    </section>

    <!-- éå»çµ±è¨ˆãƒ»ã‚·ãƒ¼ã‚ºãƒ³æƒ…å ± -->
    <section class="statistics-section">
        <div class="container">
            <h2 class="section-title">ğŸ“Š çµ±è¨ˆãƒ»ã‚·ãƒ¼ã‚ºãƒ³æƒ…å ±</h2>
            <p class="section-subtitle">
                éå»ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æœ€é©ãªãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚·ãƒ¼ã‚ºãƒ³ã‚’çŸ¥ã‚ã†
            </p>

            <div class="stats-tabs">
                <button class="stats-tab active" data-type="monthly">æœˆåˆ¥çµ±è¨ˆ</button>
                <button class="stats-tab" data-type="seasonal">ã‚·ãƒ¼ã‚ºãƒ³æƒ…å ±</button>
                <button class="stats-tab" data-type="historical">éå»ãƒ‡ãƒ¼ã‚¿</button>
            </div>

            <div id="statisticsContainer">
                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹çµ±è¨ˆæƒ…å ± -->
            </div>
        </div>
    </section>
        </div>
    </section>

    <!-- å­£ç¯€åˆ¥ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æƒ…å ± -->
    <section class="seasonal-info">
        <div class="container">
            <h2 class="section-title">ğŸ“… å­£ç¯€åˆ¥ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æƒ…å ±</h2>
            <p class="section-subtitle">
                å„ã‚·ãƒ¼ã‚ºãƒ³ã®ç‰¹å¾´ã¨ãƒ™ã‚¹ãƒˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æŠŠæ¡ã—ã¦ãƒ€ã‚¤ãƒ“ãƒ³ã‚°è¨ˆç”»ã‚’ç«‹ã¦ã‚ˆã†
            </p>
            
            <div class="seasonal-grid">
                <div class="season-card">
                    <div class="season-header">
                        <div class="season-title">ğŸŒ¸ æ˜¥ã‚·ãƒ¼ã‚ºãƒ³</div>
                        <div class="season-period">3æœˆã€œ5æœˆ</div>
                    </div>
                    <div class="season-content">
                        <div class="season-features">
                            <ul class="feature-list">
                                <li><i class="fas fa-thermometer-half feature-icon"></i>éã”ã—ã‚„ã™ã„æ°—å€™</li>
                                <li><i class="fas fa-eye feature-icon"></i>é€æ˜åº¦å‘ä¸Šé–‹å§‹</li>
                                <li><i class="fas fa-fish feature-icon"></i>ãƒãƒ³ã‚¿ã‚·ãƒ¼ã‚ºãƒ³é–‹å§‹</li>
                                <li><i class="fas fa-users feature-icon"></i>æ··é›‘å°‘ãªã‚</li>
                            </ul>
                        </div>
                        
                        <div class="pros-cons">
                            <div class="pros">
                                <h4>ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                <ul>
                                    <li>æ–™é‡‘ãŒå®‰ã„</li>
                                    <li>æ°—å€™ãŒå®‰å®š</li>
                                    <li>äººãŒå°‘ãªã„</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h4>æ³¨æ„ç‚¹</h4>
                                <ul>
                                    <li>ç¨€ã«åŒ—é¢¨ã‚ã‚Š</li>
                                    <li>æ°´æ¸©ã‚„ã‚„ä½ã‚</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="season-card">
                    <div class="season-header">
                        <div class="season-title">â˜€ï¸ å¤ã‚·ãƒ¼ã‚ºãƒ³</div>
                        <div class="season-period">6æœˆã€œ8æœˆ</div>
                    </div>
                    <div class="season-content">
                        <div class="season-features">
                            <ul class="feature-list">
                                <li><i class="fas fa-star feature-icon"></i>ãƒ™ã‚¹ãƒˆã‚·ãƒ¼ã‚ºãƒ³</li>
                                <li><i class="fas fa-water feature-icon"></i>æµ·æ³å®‰å®š</li>
                                <li><i class="fas fa-whale feature-icon"></i>ã‚¸ãƒ³ãƒ™ã‚¨ã‚¶ãƒ¡é­é‡</li>
                                <li><i class="fas fa-sun feature-icon"></i>æœ€é«˜ã®é€æ˜åº¦</li>
                            </ul>
                        </div>
                        
                        <div class="pros-cons">
                            <div class="pros">
                                <h4>ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                <ul>
                                    <li>æœ€é«˜ã®æµ·æ³</li>
                                    <li>ç”Ÿç‰©è±Šå¯Œ</li>
                                    <li>å®‰å®šã—ãŸå¤©æ°—</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h4>æ³¨æ„ç‚¹</h4>
                                <ul>
                                    <li>æ–™é‡‘ãŒé«˜ã„</li>
                                    <li>æ··é›‘</li>
                                    <li>å°é¢¨ãƒªã‚¹ã‚¯</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="season-card">
                    <div class="season-header">
                        <div class="season-title">ğŸ‚ ç§‹ã‚·ãƒ¼ã‚ºãƒ³</div>
                        <div class="season-period">9æœˆã€œ11æœˆ</div>
                    </div>
                    <div class="season-content">
                        <div class="season-features">
                            <ul class="feature-list">
                                <li><i class="fas fa-eye feature-icon"></i>é€æ˜åº¦æŠœç¾¤</li>
                                <li><i class="fas fa-fish feature-icon"></i>ç§‹ãƒãƒ³ã‚¿æ´»ç™º</li>
                                <li><i class="fas fa-users-slash feature-icon"></i>æ··é›‘è§£æ¶ˆ</li>
                                <li><i class="fas fa-temperature-high feature-icon"></i>ã¾ã æš–ã‹ã„</li>
                            </ul>
                        </div>
                        
                        <div class="pros-cons">
                            <div class="pros">
                                <h4>ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                <ul>
                                    <li>é€æ˜åº¦æœ€é«˜</li>
                                    <li>äººãŒå°‘ãªã„</li>
                                    <li>ãƒãƒ³ã‚¿æ´»ç™º</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h4>æ³¨æ„ç‚¹</h4>
                                <ul>
                                    <li>å°é¢¨ã®å½±éŸ¿</li>
                                    <li>æ°—æ¸©ä¸‹é™</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="season-card">
                    <div class="season-header">
                        <div class="season-title">â„ï¸ å†¬ã‚·ãƒ¼ã‚ºãƒ³</div>
                        <div class="season-period">12æœˆã€œ2æœˆ</div>
                    </div>
                    <div class="season-content">
                        <div class="season-features">
                            <ul class="feature-list">
                                <li><i class="fas fa-whale feature-icon"></i>ãƒ›ã‚¨ãƒ¼ãƒ«ã‚¦ã‚©ãƒƒãƒãƒ³ã‚°</li>
                                <li><i class="fas fa-hammer feature-icon"></i>ãƒãƒ³ãƒãƒ¼ãƒ˜ãƒƒãƒ‰</li>
                                <li><i class="fas fa-yen-sign feature-icon"></i>æ–™é‡‘å®‰ã„</li>
                                <li><i class="fas fa-users-slash feature-icon"></i>ç©ºã„ã¦ã„ã‚‹</li>
                            </ul>
                        </div>
                        
                        <div class="pros-cons">
                            <div class="pros">
                                <h4>ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                <ul>
                                    <li>ç‰¹åˆ¥ãªç”Ÿç‰©</li>
                                    <li>æ–™é‡‘æœ€å®‰</li>
                                    <li>ç©ºã„ã¦ã„ã‚‹</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h4>æ³¨æ„ç‚¹</h4>
                                <ul>
                                    <li>åŒ—é¢¨å¼·ã„</li>
                                    <li>æ°—æ¸©ä½ã‚</li>
                                    <li>æµ·æ³ä¸å®‰å®š</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ğŸŒŠ JijiçŸ¥è­˜ãƒ™ãƒ¼ã‚¹</h3>
                    <p>LINE Botå®Œçµå‹ãƒ»WebçŸ¥è­˜ãƒ™ãƒ¼ã‚¹çµ±åˆã‚·ã‚¹ãƒ†ãƒ </p>
                </div>
                
                <div class="footer-section">
                    <h3>æµ·æ³ãƒ»å¤©æ°—</h3>
                    <ul>
                        <li><a href="/weather-ocean/current">ç¾åœ¨ã®æµ·æ³</a></li>
                        <li><a href="/weather-ocean/forecast">é€±é–“äºˆå ±</a></li>
                        <li><a href="/weather-ocean/seasonal">å­£ç¯€æƒ…å ±</a></li>
                        <li><a href="/weather-ocean/history">éå»ãƒ‡ãƒ¼ã‚¿</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>ã‚¨ãƒªã‚¢åˆ¥æƒ…å ±</h3>
                    <ul>
                        <li><a href="/weather-ocean/ishigaki">çŸ³å£å³¶</a></li>
                        <li><a href="/weather-ocean/miyako">å®®å¤å³¶</a></li>
                        <li><a href="/weather-ocean/okinawa">æ²–ç¸„æœ¬å³¶</a></li>
                        <li><a href="/weather-ocean/other">ãã®ä»–é›¢å³¶</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>ã‚µãƒãƒ¼ãƒˆ</h3>
                    <ul>
                        <li><a href="https://line.me/ti/p/@2007331165" target="_blank">LINE Botç›¸è«‡</a></li>
                        <li><a href="/contact">ãŠå•ã„åˆã‚ã›</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 JijiçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ - æµ·æ³ãƒ»å¤©æ°—æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ </p>
            </div>
        </div>
    </footer>

    <script>
        // äºˆå ±ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.forecast-tab');
            const contents = document.querySelectorAll('.forecast-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ‡ã‚Šæ›¿ãˆ
                    contents.forEach(c => c.classList.remove('active'));
                    const targetArea = this.dataset.area;
                    const targetContent = document.getElementById(`forecast-${targetArea}`);
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                });
            });
            
            // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆç°¡æ˜“å®Ÿè£…ï¼‰
            setInterval(updateCurrentConditions, 300000); // 5åˆ†ã”ã¨
        });
        
        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æµ·æ³æƒ…å ±æ›´æ–°ï¼ˆ3æ—¥é–“è©³ç´°å¯¾å¿œï¼‰
        async function updateCurrentConditions() {
            try {
                console.log('ğŸŒŠ 3æ—¥é–“æµ·æ³ãƒ»å¤©æ°—æƒ…å ±ã‚’æ›´æ–°ä¸­...');
                
                // è¤‡æ•°ã‚¨ãƒªã‚¢ã®3æ—¥é–“ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦è¡Œå–å¾—
                const areas = ['okinawa_main', 'ishigaki', 'miyakojima', 'kerama'];
                const areaPromises = areas.map(area => 
                    fetch(`/api/weather/diving-condition/${area}?days=3`)
                        .then(response => response.json())
                        .catch(error => ({ success: false, area, error: error.message }))
                );
                
                const results = await Promise.all(areaPromises);
                
                // æˆåŠŸã—ãŸãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å‡¦ç†
                const validData = results
                    .filter(result => result.success)
                    .map(result => transformWeatherData(result));
                
                if (validData.length > 0) {
                    renderWeatherConditions(validData);
                    updateLastUpdateTime();
                    console.log(`âœ… ${validData.length}ã‚¨ãƒªã‚¢ã®3æ—¥é–“ãƒ‡ãƒ¼ã‚¿å–å¾—å®Œäº†`);
                } else {
                    console.warn('å…¨ã¦ã®æ°—è±¡åºAPIãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º');
                    renderWeatherConditions(getSampleWeatherData());
                }
                
            } catch (error) {
                console.error('å¤©æ°—ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ - ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
                renderWeatherConditions(getSampleWeatherData());
            }
        }

        // æ°—è±¡åºAPIãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºç”¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›
        function transformWeatherData(apiData) {
            const { area, diving_condition } = apiData;
            
            return {
                region: getAreaDisplayName(area),
                temperature: 25 + Math.floor(Math.random() * 5), // å®Ÿéš›ã®APIã‹ã‚‰å–å¾—äºˆå®š
                weather: getWeatherFromScore(diving_condition.score),
                wind_direction: 'åŒ—æ±',
                wind_speed: diving_condition.score > 80 ? 3 : 5,
                wave_height: diving_condition.score > 80 ? 1.0 : 1.5,
                visibility: diving_condition.score > 80 ? 25 : 20,
                water_temperature: 23 + Math.floor(Math.random() * 4),
                diving_suitability_score: diving_condition.score,
                diving_conditions: {
                    factors: transformConditionsToFactors(diving_condition)
                }
            };
        }

        // ã‚¨ãƒªã‚¢ã‚³ãƒ¼ãƒ‰â†’è¡¨ç¤ºåå¤‰æ›
        function getAreaDisplayName(areaCode) {
            const areaNames = {
                'okinawa_main': 'æ²–ç¸„æœ¬å³¶',
                'ishigaki': 'çŸ³å£å³¶',
                'miyakojima': 'å®®å¤å³¶',
                'kerama': 'æ…¶è‰¯é–“',
                'kume': 'ä¹…ç±³å³¶'
            };
            return areaNames[areaCode] || areaCode;
        }

        // ã‚¹ã‚³ã‚¢ã‹ã‚‰å¤©æ°—æ¨å®š
        function getWeatherFromScore(score) {
            if (score >= 80) return 'æ™´ã‚Œ';
            if (score >= 60) return 'æ›‡ã‚Š';
            return 'å°é›¨';
        }

        // ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ¡ä»¶ã‚’è¦å› ã«å¤‰æ›
        function transformConditionsToFactors(divingCondition) {
            const factors = {};
            
            if (divingCondition.conditions && divingCondition.conditions.length > 0) {
                factors.weather = { 
                    status: 'good', 
                    reason: divingCondition.conditions[0] 
                };
            }
            
            if (divingCondition.warnings && divingCondition.warnings.length > 0) {
                factors.warning = { 
                    status: 'poor', 
                    reason: divingCondition.warnings[0] 
                };
            }
            
            return factors;
        }

        // æµ·æ³æƒ…å ±ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderWeatherConditions(weatherData) {
            const container = document.getElementById('weatherConditions');
            if (!container) return;

            container.innerHTML = weatherData.map(area => {
                const statusClass = getStatusClass(area.diving_suitability_score);
                const statusText = getStatusText(area.diving_suitability_score);
                const weatherIcon = getWeatherIcon(area.weather);

                return `
                    <div class="condition-card ${statusClass}">
                        <div class="diving-status">${statusText}</div>
                        <h3 class="area-name">
                            <span class="area-icon">${getAreaIcon(area.region)}</span>
                            ${area.region}
                        </h3>
                        <div class="weather-icon">${weatherIcon}</div>
                        <div class="temperature">${area.temperature}Â°C</div>
                        
                        <div class="condition-details">
                            <div class="detail-item">
                                <div class="detail-label">é¢¨å‘ãƒ»é¢¨é€Ÿ</div>
                                <div class="detail-value">${area.wind_direction} ${area.wind_speed}m/s</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">æ³¢é«˜</div>
                                <div class="detail-value">${area.wave_height}m</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">é€æ˜åº¦</div>
                                <div class="detail-value">${area.visibility || '20-25'}m</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">æ°´æ¸©</div>
                                <div class="detail-value">${area.water_temperature || (area.temperature - 2)}Â°C</div>
                            </div>
                        </div>
                        
                        <div class="diving-score">
                            <div class="score-label">ãƒ€ã‚¤ãƒ“ãƒ³ã‚°é©æ€§ã‚¹ã‚³ã‚¢</div>
                            <div class="score-value">${area.diving_suitability_score}/100</div>
                        </div>
                        
                        <div class="diving-reasons">
                            <div class="reasons-text">${area.diving_conditions?.factors ? formatDivingReasons(area.diving_conditions.factors) : 'è‰¯å¥½ãªã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³'}</div>
                        </div>
                        
                        <div style="margin-top: 15px; text-align: center;">
                            <a href="/weather-ocean/details?area=${area.region.toLowerCase()}" 
                               style="color: var(--color-accent-1); text-decoration: none; font-size: 0.9rem;">
                                ğŸ“Š è©³ç´°æµ·æ³æƒ…å ±ã‚’è¦‹ã‚‹
                            </a>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ¡ä»¶è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ
        function formatDivingReasons(factors) {
            const goodFactors = [];
            const badFactors = [];

            Object.entries(factors).forEach(([key, factor]) => {
                if (factor.status === 'good') {
                    goodFactors.push(`âœ“ ${factor.reason}`);
                } else if (factor.status === 'poor') {
                    badFactors.push(`Ã— ${factor.reason}`);
                }
            });

            let result = '';
            if (goodFactors.length > 0) {
                result += goodFactors.slice(0, 2).join(' ');
            }
            if (badFactors.length > 0) {
                result += (result ? ' ' : '') + badFactors.slice(0, 1).join(' ');
            }

            return result || 'æ¨™æº–çš„ãªã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³';
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¯ãƒ©ã‚¹å–å¾—
        function getStatusClass(score) {
            if (score >= 80) return 'diving-status-excellent';
            if (score >= 60) return 'diving-status-good';
            return 'diving-status-poor';
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ†ã‚­ã‚¹ãƒˆå–å¾—
        function getStatusText(score) {
            if (score >= 80) return 'ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æœ€é©';
            if (score >= 60) return 'ãƒ€ã‚¤ãƒ“ãƒ³ã‚°è‰¯å¥½';
            return 'ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ³¨æ„';
        }

        // å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³å–å¾—
        function getWeatherIcon(weather) {
            if (weather.includes('æ™´')) return 'â˜€ï¸';
            if (weather.includes('æ›‡')) return 'â›…';
            if (weather.includes('é›¨')) return 'ğŸŒ§ï¸';
            if (weather.includes('é›·')) return 'â›ˆï¸';
            return 'ğŸŒ¤ï¸';
        }

        // ã‚¨ãƒªã‚¢ã‚¢ã‚¤ã‚³ãƒ³å–å¾—
        function getAreaIcon(region) {
            const icons = {
                'çŸ³å£å³¶': 'ğŸï¸',
                'å®®å¤å³¶': 'ğŸŒº',
                'æ²–ç¸„æœ¬å³¶': 'ğŸ–ï¸',
                'ä¹…ç±³å³¶': 'ğŸŒ´',
                'è¥¿è¡¨å³¶': 'ğŸ¾',
                'ä¸é‚£å›½å³¶': 'ğŸš¢'
            };
            return icons[region] || 'ğŸï¸';
        }

        // æœ€çµ‚æ›´æ–°æ™‚åˆ»è¡¨ç¤º
        function updateLastUpdateTime() {
            const element = document.getElementById('lastUpdate');
            if (element) {
                const now = new Date();
                element.textContent = now.toLocaleString('ja-JP');
            }
        }

        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆAPIæ¥ç¶šå¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
        function getSampleWeatherData() {
            return [
                {
                    region: 'çŸ³å£å³¶',
                    temperature: 28,
                    weather: 'æ™´ã‚Œ',
                    wind_direction: 'åŒ—æ±',
                    wind_speed: 3,
                    wave_height: 1.0,
                    visibility: 25,
                    water_temperature: 26,
                    diving_suitability_score: 89,
                    diving_conditions: {
                        factors: {
                            weather: { status: 'good', reason: 'è‰¯å¥½ãªå¤©æ°—' },
                            wind: { status: 'good', reason: 'ç©ã‚„ã‹ãªé¢¨' },
                            waves: { status: 'good', reason: 'ä½ã„æ³¢é«˜' }
                        }
                    }
                },
                {
                    region: 'å®®å¤å³¶',
                    temperature: 27,
                    weather: 'æ›‡ã‚Š',
                    wind_direction: 'æ±',
                    wind_speed: 4,
                    wave_height: 1.5,
                    visibility: 30,
                    water_temperature: 25,
                    diving_suitability_score: 75,
                    diving_conditions: {
                        factors: {
                            weather: { status: 'fair', reason: 'æ›‡ã‚Šç©º' },
                            wind: { status: 'good', reason: 'é©åº¦ãªé¢¨' },
                            waves: { status: 'fair', reason: 'ã‚„ã‚„é«˜ã„æ³¢' }
                        }
                    }
                },
                {
                    region: 'æ²–ç¸„æœ¬å³¶',
                    temperature: 25,
                    weather: 'å°é›¨',
                    wind_direction: 'å—è¥¿',
                    wind_speed: 6,
                    wave_height: 2.0,
                    visibility: 15,
                    water_temperature: 24,
                    diving_suitability_score: 55,
                    diving_conditions: {
                        factors: {
                            weather: { status: 'poor', reason: 'é›¨å¤©' },
                            wind: { status: 'fair', reason: 'ã‚„ã‚„å¼·ã„é¢¨' },
                            waves: { status: 'poor', reason: 'é«˜ã„æ³¢' }
                        }
                    }
                },
                {
                    region: 'æ…¶è‰¯é–“è«¸å³¶',
                    temperature: 26,
                    weather: 'æ™´ã‚Œ',
                    wind_direction: 'åŒ—',
                    wind_speed: 2,
                    wave_height: 0.8,
                    visibility: 35,
                    water_temperature: 25,
                    diving_suitability_score: 92,
                    diving_conditions: {
                        factors: {
                            weather: { status: 'excellent', reason: 'å¿«æ™´' },
                            wind: { status: 'excellent', reason: 'å¾®é¢¨' },
                            waves: { status: 'excellent', reason: 'ã¹ãŸå‡ª' }
                        }
                    }
                }
            ];
        }
        
        // é€±é–“äºˆå ±ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ»è¡¨ç¤º
        async function loadWeeklyForecast() {
            try {
                console.log('ğŸ“… é€±é–“äºˆå ±ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­...');
                
                const activeArea = document.querySelector('.forecast-tab.active')?.dataset.area || 'ishigaki';
                const areaCode = {
                    'ishigaki': 'ishigaki',
                    'miyako': 'miyakojima', 
                    'okinawa': 'okinawa_main'
                }[activeArea] || 'ishigaki';
                
                const response = await fetch(`/api/weather/forecast/${areaCode}`);
                const data = await response.json();
                
                if (data.success && data.data) {
                    const forecastData = { [activeArea]: processForecastData(data.data) };
                    renderWeeklyForecast(forecastData);
                } else {
                    console.error('é€±é–“äºˆå ±å–å¾—å¤±æ•—:', data.message);
                    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ - ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
                    renderWeeklyForecast(getSampleForecastData());
                }
                
            } catch (error) {
                console.error('é€±é–“äºˆå ±å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                renderWeeklyForecast(getSampleForecastData());
            }
        }

        // æ°—è±¡åºäºˆå ±ãƒ‡ãƒ¼ã‚¿ã‚’é€±é–“äºˆå ±ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›
        function processForecastData(jmaData) {
            const baseDate = new Date();
            const forecastDays = [];

            // æ°—è±¡åºãƒ‡ãƒ¼ã‚¿ã‹ã‚‰7æ—¥é–“ã®äºˆå ±ã‚’ç”Ÿæˆ
            for (let i = 0; i < 7; i++) {
                const date = new Date(baseDate);
                date.setDate(date.getDate() + i);
                
                // JMAãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è©²å½“æ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆåˆ©ç”¨å¯èƒ½ã§ã‚ã‚Œã°ï¼‰
                const dayData = extractDayData(jmaData, i);
                
                forecastDays.push({
                    date: date.toISOString().split('T')[0],
                    weather: dayData.weather || 'æ™´ã‚Œ',
                    temp_max: dayData.tempMax || (25 + Math.floor(Math.random() * 5)),
                    temp_min: dayData.tempMin || (20 + Math.floor(Math.random() * 4)),
                    wave_height: (1.0 + Math.random() * 1.0).toFixed(1),
                    wind_direction: dayData.windDirection || 'åŒ—æ±',
                    wind_speed: dayData.windSpeed || (2 + Math.floor(Math.random() * 4)),
                    diving_score: calculateForecastDivingScore(dayData)
                });
            }

            return forecastDays;
        }

        // JMAãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç‰¹å®šæ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
        function extractDayData(jmaData, dayIndex) {
            try {
                const timeSeries = jmaData[0]?.timeSeries || [];
                
                // å¤©æ°—æƒ…å ±
                const weatherData = timeSeries.find(ts => ts.areas?.[0]?.weathers);
                const weather = weatherData?.areas?.[0]?.weathers?.[Math.min(dayIndex, weatherData.areas[0].weathers.length - 1)];
                
                // æ°—æ¸©æƒ…å ±
                const tempData = timeSeries.find(ts => ts.areas?.[0]?.temps);
                const tempMax = tempData?.areas?.[0]?.temps?.[Math.min(dayIndex * 2, tempData.areas[0].temps.length - 2)];
                const tempMin = tempData?.areas?.[0]?.temps?.[Math.min(dayIndex * 2 + 1, tempData.areas[0].temps.length - 1)];
                
                // é¢¨æƒ…å ±
                const windData = timeSeries.find(ts => ts.areas?.[0]?.winds);
                const wind = windData?.areas?.[0]?.winds?.[Math.min(dayIndex, windData.areas[0].winds.length - 1)];
                
                return {
                    weather: weather || 'æ™´ã‚Œ',
                    tempMax: tempMax ? parseInt(tempMax) : null,
                    tempMin: tempMin ? parseInt(tempMin) : null,
                    windDirection: extractWindDirection(wind),
                    windSpeed: extractWindSpeed(wind)
                };
            } catch (error) {
                console.warn('JMAãƒ‡ãƒ¼ã‚¿è§£æã‚¨ãƒ©ãƒ¼:', error);
                return {};
            }
        }

        // é¢¨å‘ãã‚’æŠ½å‡º
        function extractWindDirection(windText) {
            if (!windText) return 'åŒ—æ±';
            if (windText.includes('åŒ—æ±')) return 'åŒ—æ±';
            if (windText.includes('æ±')) return 'æ±';
            if (windText.includes('å—æ±')) return 'å—æ±';
            if (windText.includes('å—')) return 'å—';
            if (windText.includes('å—è¥¿')) return 'å—è¥¿';
            if (windText.includes('è¥¿')) return 'è¥¿';
            if (windText.includes('åŒ—è¥¿')) return 'åŒ—è¥¿';
            if (windText.includes('åŒ—')) return 'åŒ—';
            return 'åŒ—æ±';
        }

        // é¢¨é€Ÿã‚’æŠ½å‡º
        function extractWindSpeed(windText) {
            if (!windText) return 3;
            const match = windText.match(/(\d+)/);
            return match ? parseInt(match[1]) : 3;
        }

        // äºˆå ±ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚¹ã‚³ã‚¢è¨ˆç®—
        function calculateForecastDivingScore(dayData) {
            let score = 85; // ãƒ™ãƒ¼ã‚¹ã‚¹ã‚³ã‚¢
            
            if (dayData.weather) {
                if (dayData.weather.includes('é›¨')) score -= 20;
                if (dayData.weather.includes('é›·')) score -= 30;
                if (dayData.weather.includes('æ›‡')) score -= 5;
            }
            
            if (dayData.windSpeed) {
                if (dayData.windSpeed > 8) score -= 25;
                else if (dayData.windSpeed > 5) score -= 10;
            }
            
            return Math.max(20, Math.min(100, score));
        }

        // é€±é–“äºˆå ±ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderWeeklyForecast(forecastData) {
            const container = document.getElementById('forecastContainer');
            if (!container) return;

            const activeArea = document.querySelector('.forecast-tab.active')?.dataset.area || 'ishigaki';
            const areaForecast = forecastData[activeArea] || forecastData.ishigaki;

            container.innerHTML = `
                <div class="forecast-grid">
                    ${areaForecast.map((day, index) => `
                        <div class="forecast-card">
                            <div class="diving-score-forecast">${day.diving_score}</div>
                            <div class="forecast-date">${formatForecastDate(day.date, index)}</div>
                            <div class="forecast-weather">${getWeatherIcon(day.weather)}</div>
                            <div class="forecast-temp">æœ€é«˜${day.temp_max}Â°C / æœ€ä½${day.temp_min}Â°C</div>
                            <div class="forecast-details">
                                <span>æ³¢é«˜: ${day.wave_height}m</span>
                                <span>é¢¨: ${day.wind_direction}${day.wind_speed}m/s</span>
                                <span>ãƒ€ã‚¤ãƒ“ãƒ³ã‚°: ${getDivingCondition(day.diving_score)}</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // çµ±è¨ˆæƒ…å ±ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ»è¡¨ç¤º
        async function loadStatistics() {
            try {
                console.log('ğŸ“Š çµ±è¨ˆæƒ…å ±ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­...');
                
                const activeType = document.querySelector('.stats-tab.active')?.dataset.type || 'monthly';
                const response = await fetch(`/api/weather/statistics/${activeType}`);
                const data = await response.json();
                
                if (data.success && data.data) {
                    renderStatistics(data.data);
                } else {
                    console.error('çµ±è¨ˆæƒ…å ±å–å¾—å¤±æ•—:', data.message);
                    renderStatistics(getSampleStatisticsData());
                }
                
            } catch (error) {
                console.error('çµ±è¨ˆæƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                renderStatistics(getSampleStatisticsData());
            }
        }

        // çµ±è¨ˆæƒ…å ±ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderStatistics(statsData) {
            const container = document.getElementById('statisticsContainer');
            if (!container) return;

            const activeType = document.querySelector('.stats-tab.active')?.dataset.type || 'monthly';

            if (activeType === 'monthly') {
                renderMonthlyStats(container, statsData.monthly);
            } else if (activeType === 'seasonal') {
                renderSeasonalInfo(container, statsData.seasonal);
            } else if (activeType === 'historical') {
                renderHistoricalData(container, statsData.historical);
            }
        }

        // æœˆåˆ¥çµ±è¨ˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderMonthlyStats(container, monthlyData) {
            container.innerHTML = `
                <div class="monthly-stats">
                    ${monthlyData.map(month => `
                        <div class="month-card">
                            <div class="month-name">${month.month}</div>
                            <div class="month-rating">${getMonthRating(month.score)}</div>
                            <div class="month-score">${month.score}ç‚¹</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ã‚·ãƒ¼ã‚ºãƒ³æƒ…å ±ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderSeasonalInfo(container, seasonalData) {
            container.innerHTML = `
                <div class="season-info">
                    ${seasonalData.map(season => `
                        <div class="season-card">
                            <div class="season-header">
                                <div class="season-icon">${season.icon}</div>
                                <div>
                                    <div class="season-title">${season.name}</div>
                                    <div class="season-period">${season.period}</div>
                                </div>
                            </div>
                            <div class="season-highlights">
                                ${season.highlights.map(highlight => `
                                    <div class="highlight-item">
                                        <div class="highlight-icon">${highlight.icon}</div>
                                        <div>${highlight.text}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // éå»ãƒ‡ãƒ¼ã‚¿ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderHistoricalData(container, historicalData) {
            container.innerHTML = `
                <div class="historical-data">
                    <div class="chart-placeholder">
                        <h3>éå»5å¹´é–“ã®ãƒ€ã‚¤ãƒ“ãƒ³ã‚°é©æ€§æ¨ç§»</h3>
                        <p>ã‚°ãƒ©ãƒ•æ©Ÿèƒ½ã¯ä»Šå¾Œå®Ÿè£…äºˆå®šã§ã™</p>
                    </div>
                    <div class="historical-summary">
                        <h4>éå»ãƒ‡ãƒ¼ã‚¿ã‚µãƒãƒªãƒ¼</h4>
                        <ul>
                            <li>æœ€é«˜ã‚¹ã‚³ã‚¢æœˆ: ${historicalData.best_month} (${historicalData.best_score}ç‚¹)</li>
                            <li>å¹³å‡ã‚¹ã‚³ã‚¢: ${historicalData.average_score}ç‚¹</li>
                            <li>å°é¢¨ç™ºç”Ÿå›æ•°: å¹´å¹³å‡${historicalData.typhoon_average}å›</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        // å°é¢¨ãƒ»ç·Šæ€¥ã‚¢ãƒ©ãƒ¼ãƒˆã®è¡¨ç¤ºåˆ¶å¾¡
        async function checkWeatherAlerts() {
            try {
                console.log('âš ï¸ æ°—è±¡è­¦å ±ãƒ»æµ·ä¸Šè­¦å ±ãƒ»å°é¢¨æƒ…å ±ã‚’ãƒã‚§ãƒƒã‚¯ä¸­...');
                
                const response = await fetch('/api/weather/alerts/all');
                const data = await response.json();
                
                if (data.success && data.alerts && data.alerts.length > 0) {
                    console.log(`ğŸš¨ ${data.alerts.length}ä»¶ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’æ¤œå‡º`);
                    displayAdvancedWeatherAlerts(data.alerts);
                } else {
                    console.log('âœ… ç¾åœ¨ã€æ°—è±¡è­¦å ±ãƒ»å°é¢¨æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“');
                    hideWeatherAlerts();
                }
                
            } catch (error) {
                console.error('ã‚¢ãƒ©ãƒ¼ãƒˆæƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ - åŸºæœ¬çš„ãªã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
                displaySampleAlerts();
            }
        }

        // é«˜åº¦ãªã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ 
        function displayAdvancedWeatherAlerts(alerts) {
            // æœ€å„ªå…ˆåº¦ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ç‰¹å®š
            const criticalAlerts = alerts.filter(alert => alert.priority === 'critical');
            const highAlerts = alerts.filter(alert => alert.priority === 'high');
            const mediumAlerts = alerts.filter(alert => alert.priority === 'medium');

            // å°é¢¨ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
            criticalAlerts.forEach(alert => {
                if (alert.type === 'typhoon') {
                    displayTyphoonAlert(alert);
                }
            });

            // ä¸€èˆ¬ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
            if (highAlerts.length > 0 || mediumAlerts.length > 0) {
                const combinedAlerts = [...highAlerts, ...mediumAlerts];
                displayGeneralAlerts(combinedAlerts);
            }

            // ãƒ€ã‚¤ãƒ“ãƒ³ã‚°å½±éŸ¿ã‚µãƒãƒªãƒ¼è¡¨ç¤º
            displayDivingImpactSummary(alerts);
        }

        // å°é¢¨ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
        function displayTyphoonAlert(typhoonAlert) {
            const typhoonSection = document.getElementById('typhoon-info');
            const typhoonContent = document.getElementById('typhoon-content');
            
            if (typhoonSection && typhoonContent) {
                const details = typhoonAlert.details;
                const impact = details.impact;
                
                typhoonContent.innerHTML = `
                    <div class="typhoon-details">
                        <div class="typhoon-main-info">
                            <h4>${typhoonAlert.title}</h4>
                            <p class="typhoon-message">${typhoonAlert.message}</p>
                        </div>
                        
                        <div class="typhoon-data-grid">
                            <div class="typhoon-data-item">
                                <div class="data-label">æœ€å¤§é¢¨é€Ÿ</div>
                                <div class="data-value">${details.maxWind}m/s</div>
                            </div>
                            <div class="typhoon-data-item">
                                <div class="data-label">ä¸­å¿ƒæ°—åœ§</div>
                                <div class="data-value">${details.pressure}hPa</div>
                            </div>
                            <div class="typhoon-data-item">
                                <div class="data-label">ç§»å‹•</div>
                                <div class="data-value">${details.movement}</div>
                            </div>
                        </div>

                        <div class="typhoon-impact-grid">
                            ${Object.entries(impact).map(([area, areaImpact]) => `
                                <div class="impact-area-card ${areaImpact.risk_level}">
                                    <h5>${getAreaDisplayName(area)}</h5>
                                    <div class="risk-level">å±é™ºåº¦: ${getRiskLevelText(areaImpact.risk_level)}</div>
                                    <div class="arrival-time">åˆ°é”äºˆæƒ³: ${areaImpact.arrival_time}</div>
                                    <div class="impact-text">${areaImpact.expected_impact}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="typhoon-recommendations">
                            <h5>ğŸš¨ ç·Šæ€¥å¯¾å¿œäº‹é …</h5>
                            <ul>
                                ${typhoonAlert.diving_impact.recommendations.map(rec => 
                                    `<li>${rec}</li>`
                                ).join('')}
                            </ul>
                        </div>
                        
                        <div class="typhoon-update-time">
                            æœ€çµ‚æ›´æ–°: ${formatAlertTime(typhoonAlert.issued_at)}
                        </div>
                    </div>
                `;
                
                typhoonSection.style.display = 'block';
                typhoonSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // ä¸€èˆ¬ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
        function displayGeneralAlerts(alerts) {
            const alertSection = document.getElementById('weather-alert');
            const alertTitleText = document.getElementById('alert-title-text');
            const alertContent = document.getElementById('alert-content');
            
            if (alertSection && alertTitleText && alertContent) {
                if (alerts.length === 1) {
                    const alert = alerts[0];
                    alertTitleText.textContent = alert.title;
                    alertContent.innerHTML = `
                        <div class="alert-single">
                            <p>${alert.message}</p>
                            <div class="alert-diving-impact">
                                <strong>ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã¸ã®å½±éŸ¿:</strong>
                                <p>${alert.diving_impact.message}</p>
                            </div>
                            <div class="alert-areas">
                                å¯¾è±¡ã‚¨ãƒªã‚¢: ${alert.areas.map(area => getAreaDisplayName(area)).join(', ')}
                            </div>
                        </div>
                    `;
                } else {
                    alertTitleText.textContent = `${alerts.length}ä»¶ã®æ°—è±¡è­¦å ±ãƒ»æ³¨æ„å ±`;
                    alertContent.innerHTML = `
                        <div class="alert-multiple">
                            ${alerts.map(alert => `
                                <div class="alert-item">
                                    <div class="alert-item-title">${alert.title}</div>
                                    <div class="alert-item-message">${alert.message}</div>
                                    <div class="alert-item-areas">
                                        ${alert.areas.map(area => getAreaDisplayName(area)).join(', ')}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
                
                // ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´
                const highestPriority = Math.max(...alerts.map(alert => 
                    ({ 'critical': 4, 'high': 3, 'medium': 2, 'low': 1 }[alert.priority] || 1)
                ));
                
                if (highestPriority >= 3) {
                    alertSection.style.background = 'linear-gradient(135deg, #dc2626, #991b1b)';
                    alertSection.style.color = 'white';
                } else {
                    alertSection.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
                    alertSection.style.color = 'white';
                }
                
                alertSection.style.display = 'block';
            }
        }

        // ãƒ€ã‚¤ãƒ“ãƒ³ã‚°å½±éŸ¿ã‚µãƒãƒªãƒ¼è¡¨ç¤º
        function displayDivingImpactSummary(alerts) {
            const container = document.getElementById('weatherConditions');
            if (!container) return;

            // æœ€ã‚‚é‡è¦ãªå½±éŸ¿ã‚’ç‰¹å®š
            const impacts = alerts.map(alert => alert.diving_impact?.status).filter(Boolean);
            const hasCriticalStop = impacts.includes('critical_stop');
            const hasRestricted = impacts.includes('restricted');
            const hasCaution = impacts.includes('caution');

            let summaryClass = '';
            let summaryText = '';
            let summaryIcon = '';

            if (hasCriticalStop) {
                summaryClass = 'critical-impact';
                summaryText = 'ğŸ›‘ å…¨æµ·åŸŸãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ´»å‹•åœæ­¢';
                summaryIcon = 'ğŸŒ€';
            } else if (hasRestricted) {
                summaryClass = 'restricted-impact';
                summaryText = 'âš ï¸ ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ´»å‹•åˆ¶é™ä¸­';
                summaryIcon = 'ğŸŒŠ';
            } else if (hasCaution) {
                summaryClass = 'caution-impact';
                summaryText = 'ğŸ’¡ ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ™‚è¦æ³¨æ„';
                summaryIcon = 'âš¡';
            }

            if (summaryText) {
                // æ—¢å­˜ã®containerã®ä¸Šã«å½±éŸ¿ã‚µãƒãƒªãƒ¼ã‚’è¡¨ç¤º
                const summaryHTML = `
                    <div class="diving-impact-summary ${summaryClass}" style="margin-bottom: 30px;">
                        <div class="impact-summary-content">
                            <div class="impact-icon">${summaryIcon}</div>
                            <div class="impact-text">
                                <div class="impact-main-text">${summaryText}</div>
                                <div class="impact-sub-text">
                                    è©³ç´°ã¯ä¸Šè¨˜ã®è­¦å ±æƒ…å ±ã‚’ã”ç¢ºèªãã ã•ã„
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.insertAdjacentHTML('beforebegin', summaryHTML);
            }
        }

        // ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
        function displayWeatherAlerts(alerts) {
            alerts.forEach(alert => {
                if (alert.type === 'typhoon') {
                    displayTyphoonInfo(alert);
                } else {
                    displayGeneralAlert(alert);
                }
            });
        }

        // å°é¢¨æƒ…å ±è¡¨ç¤º
        function displayTyphoonInfo(typhoonAlert) {
            const typhoonSection = document.getElementById('typhoon-info');
            const typhoonContent = document.getElementById('typhoon-content');
            
            if (typhoonSection && typhoonContent) {
                typhoonContent.innerHTML = `
                    <div class="typhoon-details">
                        <h4>${typhoonAlert.title}</h4>
                        <p>${typhoonAlert.message}</p>
                        <div class="typhoon-impact">
                            <strong>ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã¸ã®å½±éŸ¿:</strong>
                            <ul>
                                <li>å…¨æµ·åŸŸã§ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ä¸­æ­¢ã‚’æ¨å¥¨</li>
                                <li>ãƒœãƒ¼ãƒˆãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã¯å®Œå…¨åœæ­¢</li>
                                <li>äºˆç´„ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´ã‚’ã”æ¤œè¨ãã ã•ã„</li>
                            </ul>
                        </div>
                    </div>
                `;
                typhoonSection.style.display = 'block';
            }
        }

        // ä¸€èˆ¬ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
        function displayGeneralAlert(alert) {
            const alertSection = document.getElementById('weather-alert');
            const alertTitleText = document.getElementById('alert-title-text');
            const alertContent = document.getElementById('alert-content');
            
            if (alertSection && alertTitleText && alertContent) {
                alertTitleText.textContent = alert.title || 'æ°—è±¡è­¦å ±ãƒ»æ³¨æ„å ±';
                alertContent.textContent = alert.message;
                alertSection.style.display = 'block';
                
                // ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´
                if (alert.level === 'warning') {
                    alertSection.style.background = 'linear-gradient(135deg, #dc2626, #991b1b)';
                    alertSection.style.color = 'white';
                } else if (alert.level === 'caution') {
                    alertSection.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
                    alertSection.style.color = 'white';
                }
            }
        }

        // ã‚¢ãƒ©ãƒ¼ãƒˆéè¡¨ç¤º
        function hideWeatherAlerts() {
            const alertSection = document.getElementById('weather-alert');
            const typhoonSection = document.getElementById('typhoon-info');
            
            if (alertSection) alertSection.style.display = 'none';
            if (typhoonSection) typhoonSection.style.display = 'none';
        }

        // ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºï¼ˆé–‹ç™ºç”¨ï¼‰
        function displaySampleAlerts() {
            // å°é¢¨ã‚·ãƒ¼ã‚ºãƒ³ä¸­ï¼ˆ6-10æœˆï¼‰ã®ã¿ã‚µãƒ³ãƒ—ãƒ«è¡¨ç¤º
            const now = new Date();
            const month = now.getMonth() + 1;
            
            if (month >= 6 && month <= 10 && Math.random() < 0.3) { // 30%ã®ç¢ºç‡
                displayTyphoonInfo({
                    type: 'typhoon',
                    title: 'å°é¢¨ç¬¬12å·æ¥è¿‘ä¸­',
                    message: 'å°é¢¨ç¬¬12å·ãŒæ²–ç¸„åœ°æ–¹ã«æ¥è¿‘ã—ã¦ã„ã¾ã™ã€‚ä»Šå¾Œ24æ™‚é–“ä»¥å†…ã«å½±éŸ¿ã‚’å—ã‘ã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚'
                });
            }
        }

        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ç¾¤
        function formatForecastDate(dateStr, index) {
            if (index === 0) return 'ä»Šæ—¥';
            if (index === 1) return 'æ˜æ—¥';
            
            const date = new Date(dateStr);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            return `${month}/${day}`;
        }

        function getDivingCondition(score) {
            if (score >= 80) return 'æœ€é©';
            if (score >= 60) return 'è‰¯å¥½';
            if (score >= 40) return 'æ³¨æ„';
            return 'å›°é›£';
        }

        function getMonthRating(score) {
            if (score >= 80) return 'â­â­â­';
            if (score >= 60) return 'â­â­';
            return 'â­';
        }

        // ã‚¢ãƒ©ãƒ¼ãƒˆé–¢é€£ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function getRiskLevelText(level) {
            const levels = {
                'low': 'ä½',
                'medium': 'ä¸­',
                'high': 'é«˜',
                'extreme': 'æ¥µé«˜'
            };
            return levels[level] || level;
        }

        function formatAlertTime(timeString) {
            try {
                const date = new Date(timeString);
                return date.toLocaleString('ja-JP', {
                    year: 'numeric',
                    month: 'numeric',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } catch (error) {
                return timeString;
            }
        }

        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
        function getSampleForecastData() {
            const baseDate = new Date();
            const areas = ['ishigaki', 'miyako', 'okinawa', 'kerama'];
            const forecastData = {};

            areas.forEach(area => {
                forecastData[area] = [];
                for (let i = 0; i < 7; i++) {
                    const date = new Date(baseDate);
                    date.setDate(date.getDate() + i);
                    
                    // ã‚¨ãƒªã‚¢åˆ¥ã®ç‰¹æ€§ã‚’åæ˜ 
                    let baseScore = 70;
                    if (area === 'kerama') baseScore = 85; // æ…¶è‰¯é–“ã¯é«˜ã‚¹ã‚³ã‚¢
                    if (area === 'ishigaki') baseScore = 80; // çŸ³å£ã‚‚é«˜ã‚
                    
                    forecastData[area].push({
                        date: date.toISOString().split('T')[0],
                        weather: ['æ™´ã‚Œ', 'æ›‡ã‚Š', 'å°é›¨'][Math.floor(Math.random() * 3)],
                        temp_max: 26 + Math.floor(Math.random() * 6),
                        temp_min: 22 + Math.floor(Math.random() * 4),
                        wave_height: (0.8 + Math.random() * 1.5).toFixed(1),
                        wind_direction: ['åŒ—', 'åŒ—æ±', 'æ±', 'å—æ±'][Math.floor(Math.random() * 4)],
                        wind_speed: 2 + Math.floor(Math.random() * 5),
                        diving_score: baseScore + Math.floor(Math.random() * 20)
                    });
                }
            });

            return forecastData;
        }

        function getSampleStatisticsData() {
            return {
                monthly: [
                    { month: '1æœˆ', score: 70 }, { month: '2æœˆ', score: 75 },
                    { month: '3æœˆ', score: 80 }, { month: '4æœˆ', score: 85 },
                    { month: '5æœˆ', score: 88 }, { month: '6æœˆ', score: 90 },
                    { month: '7æœˆ', score: 85 }, { month: '8æœˆ', score: 82 },
                    { month: '9æœˆ', score: 80 }, { month: '10æœˆ', score: 85 },
                    { month: '11æœˆ', score: 88 }, { month: '12æœˆ', score: 75 }
                ],
                seasonal: [
                    {
                        name: 'æ˜¥ã‚·ãƒ¼ã‚ºãƒ³',
                        period: '3æœˆ-5æœˆ',
                        icon: 'ğŸŒ¸',
                        highlights: [
                            { icon: 'ğŸŒ¡ï¸', text: 'å¿«é©ãªæ°´æ¸©ï¼ˆ24-26Â°Cï¼‰' },
                            { icon: 'ğŸŒ¤ï¸', text: 'å®‰å®šã—ãŸå¤©å€™' },
                            { icon: 'ğŸ ', text: 'é€æ˜åº¦æŠœç¾¤ï¼ˆ30m+ï¼‰' }
                        ]
                    },
                    {
                        name: 'å¤ã‚·ãƒ¼ã‚ºãƒ³',
                        period: '6æœˆ-8æœˆ',
                        icon: 'â˜€ï¸',
                        highlights: [
                            { icon: 'ğŸŒŠ', text: 'æœ€é«˜æ°´æ¸©ï¼ˆ28-30Â°Cï¼‰' },
                            { icon: 'ğŸ¢', text: 'ã‚¦ãƒŸã‚¬ãƒ¡é­é‡ç‡é«˜' },
                            { icon: 'âš ï¸', text: 'å°é¢¨ã‚·ãƒ¼ã‚ºãƒ³è¦æ³¨æ„' }
                        ]
                    },
                    {
                        name: 'ç§‹ã‚·ãƒ¼ã‚ºãƒ³',
                        period: '9æœˆ-11æœˆ',
                        icon: 'ğŸ‚',
                        highlights: [
                            { icon: 'ğŸŒ¡ï¸', text: 'ç¨‹ã‚ˆã„æ°´æ¸©ï¼ˆ26-28Â°Cï¼‰' },
                            { icon: 'ğŸŒŠ', text: 'ç©ã‚„ã‹ãªæµ·æ³' },
                            { icon: 'ğŸ ', text: 'ãƒãƒ³ã‚¿ã‚·ãƒ¼ã‚ºãƒ³' }
                        ]
                    },
                    {
                        name: 'å†¬ã‚·ãƒ¼ã‚ºãƒ³',
                        period: '12æœˆ-2æœˆ',
                        icon: 'â„ï¸',
                        highlights: [
                            { icon: 'ğŸŒ¡ï¸', text: 'æ°´æ¸©ã‚„ã‚„ä½ã‚ï¼ˆ22-24Â°Cï¼‰' },
                            { icon: 'ğŸŒŠ', text: 'é€æ˜åº¦æœ€é«˜ï¼ˆ35m+ï¼‰' },
                            { icon: 'ğŸ‹', text: 'ãƒ›ã‚¨ãƒ¼ãƒ«ã‚¦ã‚©ãƒƒãƒãƒ³ã‚°' }
                        ]
                    }
                ],
                historical: {
                    best_month: '6æœˆ',
                    best_score: 92,
                    average_score: 82,
                    typhoon_average: 3.2
                }
            };
        }
        
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        function setupTabEvents() {
            // é€±é–“äºˆå ±ã‚¿ãƒ–
            document.querySelectorAll('.forecast-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.forecast-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    loadWeeklyForecast();
                });
            });

            // çµ±è¨ˆæƒ…å ±ã‚¿ãƒ–
            document.querySelectorAll('.stats-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.stats-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    loadStatistics();
                });
            });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            checkWeatherAlerts();
            updateCurrentConditions(); // åˆå›ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
            loadWeeklyForecast(); // é€±é–“äºˆå ±åˆæœŸåŒ–
            loadStatistics(); // çµ±è¨ˆæƒ…å ±åˆæœŸåŒ–
            setupTabEvents(); // ã‚¿ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        });
    </script>
</body>
</html>