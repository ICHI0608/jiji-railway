<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å£ã‚³ãƒŸæŠ•ç¨¿ | Jijiä¼šå“¡ã‚·ã‚¹ãƒ†ãƒ </title>
    <meta name="description" content="ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ä½“é¨“ã®å£ã‚³ãƒŸã‚’æŠ•ç¨¿ã—ã¦ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã€‚ä»–ã®åˆå¿ƒè€…ãƒ€ã‚¤ãƒãƒ¼ã®ãŸã‚ã«è²´é‡ãªä½“é¨“è«‡ã‚’ã‚·ã‚§ã‚¢ã—ã‚ˆã†ã€‚">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../app/v28-styles.css">
    
    <style>
        .review-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 80px 0 60px;
            text-align: center;
        }
        
        .review-process {
            padding: 60px 0;
            background: #f0fdf4;
        }
        
        .process-steps {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .process-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
            max-width: 200px;
        }
        
        .process-step::after {
            content: '';
            position: absolute;
            top: 25px;
            right: -50px;
            width: 40px;
            height: 2px;
            background: #10b981;
            z-index: 1;
        }
        
        .process-step:last-child::after {
            display: none;
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: #10b981;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }
        
        .step-number.active {
            background: #ef4444;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }
        
        .step-title {
            font-weight: 600;
            color: #065f46;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .review-form-section {
            padding: 80px 0;
            background: white;
        }
        
        .review-form {
            max-width: 800px;
            margin: 0 auto;
            background: #f8fafc;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
        }
        
        .step-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .step-title-main {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 10px;
        }
        
        .step-description {
            color: #6b7280;
            line-height: 1.6;
        }
        
        /* Step 1: ã‚¨ãƒªã‚¢ãƒ»ã‚·ãƒ§ãƒƒãƒ—é¸æŠ */
        .area-selection {
            margin-bottom: 40px;
        }
        
        .area-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .area-tab {
            padding: 12px 24px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .area-tab.selected {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }
        
        .shop-search {
            margin-bottom: 30px;
        }
        
        .search-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #10b981;
            outline: none;
        }
        
        .shop-list {
            display: none;
        }
        
        .shop-list.active {
            display: block;
        }
        
        .shop-tier {
            margin-bottom: 30px;
        }
        
        .tier-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tier-premium {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
        }
        
        .tier-verified {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e40af;
        }
        
        .tier-basic {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            color: #374151;
        }
        
        .shop-items {
            display: grid;
            gap: 15px;
        }
        
        .shop-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .shop-item:hover {
            border-color: #10b981;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.1);
        }
        
        .shop-item.selected {
            border-color: #10b981;
            background: #f0fdf4;
        }
        
        .shop-item input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }
        
        .shop-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .shop-badge {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
        }
        
        .badge-premium { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .badge-verified { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
        
        .shop-details h4 {
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 5px;
        }
        
        .shop-description {
            color: #6b7280;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .shop-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
        }
        
        .rating-stars {
            color: #fbbf24;
            font-size: 0.9rem;
        }
        
        .rating-text {
            font-size: 0.8rem;
            color: #6b7280;
        }
        
        /* Step 2: ä½“é¨“å†…å®¹ */
        .experience-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-input, .form-select, .form-textarea {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: #10b981;
            outline: none;
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        /* Step 3: è©•ä¾¡ãƒ»ã‚¹ã‚³ã‚¢ */
        .rating-section {
            margin-bottom: 40px;
        }
        
        .rating-group {
            margin-bottom: 30px;
            padding: 25px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
        }
        
        .rating-label {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .star-rating {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .star {
            font-size: 2rem;
            color: #d1d5db;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .star:hover,
        .star.active {
            color: #fbbf24;
        }
        
        .rating-description {
            font-size: 0.9rem;
            color: #6b7280;
            font-style: italic;
        }
        
        /* Step 4: è©³ç´°ä½“é¨“è«‡ */
        .review-content {
            margin-bottom: 30px;
        }
        
        .content-group {
            margin-bottom: 25px;
        }
        
        .char-counter {
            text-align: right;
            font-size: 0.8rem;
            color: #6b7280;
            margin-top: 5px;
        }
        
        /* Step 5: ãƒ¡ãƒ‡ã‚£ã‚¢æŠ•ç¨¿ */
        .media-upload {
            margin-bottom: 30px;
        }
        
        .upload-section {
            margin-bottom: 30px;
        }
        
        .upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f9fafb;
        }
        
        .upload-area:hover {
            border-color: #10b981;
            background: #f0fdf4;
        }
        
        .upload-area.dragover {
            border-color: #10b981;
            background: #f0fdf4;
            transform: scale(1.02);
        }
        
        .upload-icon {
            font-size: 3rem;
            color: #9ca3af;
            margin-bottom: 15px;
        }
        
        .upload-text {
            color: #6b7280;
            margin-bottom: 10px;
        }
        
        .upload-hint {
            font-size: 0.8rem;
            color: #9ca3af;
        }
        
        .file-input {
            display: none;
        }
        
        .uploaded-files {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .uploaded-file {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background: #f3f4f6;
            aspect-ratio: 1;
        }
        
        .file-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .file-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        /* ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤º */
        .points-preview {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .points-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #92400e;
            margin-bottom: 10px;
        }
        
        .points-amount {
            font-size: 2.5rem;
            font-weight: 900;
            color: #f59e0b;
            margin-bottom: 10px;
        }
        
        .points-breakdown {
            font-size: 0.9rem;
            color: #b45309;
            line-height: 1.5;
        }
        
        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e5e7eb;
        }
        
        .btn-nav {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-prev {
            background: #f3f4f6;
            color: #6b7280;
        }
        
        .btn-prev:hover {
            background: #e5e7eb;
            color: #374151;
        }
        
        .btn-next {
            background: #10b981;
            color: white;
        }
        
        .btn-next:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .btn-submit {
            background: #ef4444;
            color: white;
            font-size: 1.1rem;
            padding: 15px 40px;
        }
        
        .btn-submit:hover {
            background: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
        }
        
        .form-progress {
            background: #e5e7eb;
            height: 6px;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .form-progress-bar {
            background: linear-gradient(135deg, #10b981, #059669);
            height: 100%;
            width: 20%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }
        
        @media (max-width: 768px) {
            .process-steps {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            .process-step::after {
                display: none;
            }
            
            .experience-form {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .area-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .form-navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .uploaded-files {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="main-header">
        <nav class="main-nav">
            <a href="/" class="main-logo">
                <h1>ğŸŒŠ Jiji</h1>
                <span>ä¼šå“¡ã‚·ã‚¹ãƒ†ãƒ </span>
            </a>
            
            <ul class="main-nav-menu">
                <li><a href="/">ãƒ›ãƒ¼ãƒ </a></li>
                <li><a href="/member">ãƒã‚¤ãƒšãƒ¼ã‚¸</a></li>
                <li><a href="/member/review-post" class="active">å£ã‚³ãƒŸæŠ•ç¨¿</a></li>
                <li><a href="/member/points">ãƒã‚¤ãƒ³ãƒˆ</a></li>
                <li><a href="/shops-database">ã‚·ãƒ§ãƒƒãƒ—DB</a></li>
            </ul>
            
            <div class="main-nav-buttons">
                <a href="https://line.me/ti/p/@2007331165" class="btn btn-primary" target="_blank">
                    <i class="fab fa-line"></i> LINEç›¸è«‡
                </a>
            </div>
        </nav>
    </header>

    <!-- å£ã‚³ãƒŸæŠ•ç¨¿ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <section class="review-header">
        <div class="container">
            <h1 class="database-title">ğŸ“ å£ã‚³ãƒŸæŠ•ç¨¿</h1>
            <p class="database-subtitle">
                ã‚ãªãŸã®ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ä½“é¨“ã‚’ã‚·ã‚§ã‚¢ã—ã¦ã€ä»–ã®åˆå¿ƒè€…ãƒ€ã‚¤ãƒãƒ¼ã‚’å¿œæ´ã—ã‚ˆã†ã€‚<br>
                è©³ç´°ãªå£ã‚³ãƒŸã§ãƒã‚¤ãƒ³ãƒˆã‚‚ç²å¾—ã§ãã¾ã™ï¼
            </p>
        </div>
    </section>

    <!-- æŠ•ç¨¿ãƒ—ãƒ­ã‚»ã‚¹ -->
    <section class="review-process">
        <div class="container">
            <div class="process-steps">
                <div class="process-step">
                    <div class="step-number active" id="step-indicator-1">1</div>
                    <div class="step-title">ã‚·ãƒ§ãƒƒãƒ—é¸æŠ</div>
                </div>
                <div class="process-step">
                    <div class="step-number" id="step-indicator-2">2</div>
                    <div class="step-title">ä½“é¨“å†…å®¹å…¥åŠ›</div>
                </div>
                <div class="process-step">
                    <div class="step-number" id="step-indicator-3">3</div>
                    <div class="step-title">è©•ä¾¡ãƒ»ã‚¹ã‚³ã‚¢</div>
                </div>
                <div class="process-step">
                    <div class="step-number" id="step-indicator-4">4</div>
                    <div class="step-title">è©³ç´°ä½“é¨“è«‡</div>
                </div>
                <div class="process-step">
                    <div class="step-number" id="step-indicator-5">5</div>
                    <div class="step-title">ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ»æŠ•ç¨¿</div>
                </div>
            </div>
        </div>
    </section>

    <!-- å£ã‚³ãƒŸæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ  -->
    <section class="review-form-section">
        <div class="container">
            <div class="review-form">
                <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
                <div class="form-progress">
                    <div class="form-progress-bar" id="progress-bar"></div>
                </div>

                <!-- Step 1: ã‚·ãƒ§ãƒƒãƒ—é¸æŠ -->
                <div class="form-step active" id="step-1">
                    <div class="step-header">
                        <h2 class="step-title-main">ğŸª ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚·ãƒ§ãƒƒãƒ—ã‚’é¸æŠ</h2>
                        <p class="step-description">
                            ä½“é¨“ã—ãŸãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚·ãƒ§ãƒƒãƒ—ã‚’åœ°åŸŸã‹ã‚‰é¸æŠã—ã¦ãã ã•ã„ã€‚<br>
                            ã‚·ãƒ§ãƒƒãƒ—åã§æ¤œç´¢ã‚‚å¯èƒ½ã§ã™ã€‚
                        </p>
                    </div>

                    <!-- ã‚¨ãƒªã‚¢é¸æŠ -->
                    <div class="area-selection">
                        <div class="area-tabs">
                            <div class="area-tab selected" data-area="ishigaki">ğŸï¸ çŸ³å£å³¶</div>
                            <div class="area-tab" data-area="miyako">ğŸŒº å®®å¤å³¶</div>
                            <div class="area-tab" data-area="okinawa">ğŸ–ï¸ æ²–ç¸„æœ¬å³¶</div>
                            <div class="area-tab" data-area="other">ğŸš¢ ãã®ä»–é›¢å³¶</div>
                        </div>

                        <!-- ã‚·ãƒ§ãƒƒãƒ—æ¤œç´¢ -->
                        <div class="shop-search">
                            <input type="text" class="search-input" id="shop-search" 
                                   placeholder="ğŸ” ã‚·ãƒ§ãƒƒãƒ—åã§æ¤œç´¢...">
                        </div>

                        <!-- ã‚·ãƒ§ãƒƒãƒ—ãƒªã‚¹ãƒˆï¼ˆçŸ³å£å³¶ï¼‰ -->
                        <div class="shop-list active" id="shops-ishigaki">
                            <!-- ãƒ—ãƒ¬ãƒŸã‚¢ãƒ èªå®šã‚·ãƒ§ãƒƒãƒ— -->
                            <div class="shop-tier">
                                <h3 class="tier-title tier-premium">
                                    ğŸŒŸ Jijiãƒ—ãƒ¬ãƒŸã‚¢ãƒ èªå®šã‚·ãƒ§ãƒƒãƒ—
                                </h3>
                                <div class="shop-items">
                                    <label class="shop-item">
                                        <input type="radio" name="selected-shop" value="ISH001">
                                        <div class="shop-info">
                                            <div class="shop-details">
                                                <h4>S2ã‚¯ãƒ©ãƒ–çŸ³å£</h4>
                                                <div class="shop-badge badge-premium">ğŸŒŸ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ èªå®š</div>
                                                <p class="shop-description">ãƒãƒ³ã‚¿é­é‡ç‡95%ã€åˆå¿ƒè€…å°‚é–€æŒ‡å°20å¹´ã®å®Ÿç¸¾</p>
                                                <div class="shop-rating">
                                                    <span class="rating-stars">â˜…â˜…â˜…â˜…â˜…</span>
                                                    <span class="rating-text">4.8 (127ä»¶)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Jijiæ¨è–¦åº— -->
                            <div class="shop-tier">
                                <h3 class="tier-title tier-verified">
                                    â­ Jijiæ¨è–¦åº—
                                </h3>
                                <div class="shop-items">
                                    <label class="shop-item">
                                        <input type="radio" name="selected-shop" value="ISH002">
                                        <div class="shop-info">
                                            <div class="shop-details">
                                                <h4>ãƒãƒªãƒ³ãƒã‚¦ã‚¹ã·ã—ãƒã¬ã—ã¾</h4>
                                                <div class="shop-badge badge-verified">â­ Jijiæ¨è–¦åº—</div>
                                                <p class="shop-description">ãƒãƒ³ã‚¿ç‰¹åŒ–ã€é€è¿ã‚µãƒ¼ãƒ“ã‚¹å……å®Ÿ</p>
                                                <div class="shop-rating">
                                                    <span class="rating-stars">â˜…â˜…â˜…â˜…â˜†</span>
                                                    <span class="rating-text">4.6 (89ä»¶)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </label>
                                    
                                    <label class="shop-item">
                                        <input type="radio" name="selected-shop" value="ISH003">
                                        <div class="shop-info">
                                            <div class="shop-details">
                                                <h4>çŸ³å£å³¶ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹</h4>
                                                <div class="shop-badge badge-verified">â­ Jijiæ¨è–¦åº—</div>
                                                <p class="shop-description">å°‘äººæ•°åˆ¶ã€ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ãªé›°å›²æ°—</p>
                                                <div class="shop-rating">
                                                    <span class="rating-stars">â˜…â˜…â˜…â˜…â˜†</span>
                                                    <span class="rating-text">4.5 (76ä»¶)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- åŸºæœ¬æ²è¼‰ã‚·ãƒ§ãƒƒãƒ— -->
                            <div class="shop-tier">
                                <h3 class="tier-title tier-basic">
                                    âœ¨ åŸºæœ¬æ²è¼‰ã‚·ãƒ§ãƒƒãƒ—
                                </h3>
                                <div class="shop-items">
                                    <label class="shop-item">
                                        <input type="radio" name="selected-shop" value="ISH004">
                                        <div class="shop-info">
                                            <div class="shop-details">
                                                <h4>çŸ³å£ãƒãƒªãƒ³ã‚µãƒ¼ãƒ“ã‚¹</h4>
                                                <p class="shop-description">åœ°å…ƒå¯†ç€å‹ã€ãƒªãƒ¼ã‚ºãƒŠãƒ–ãƒ«ãªæ–™é‡‘è¨­å®š</p>
                                                <div class="shop-rating">
                                                    <span class="rating-stars">â˜…â˜…â˜…â˜…â˜†</span>
                                                    <span class="rating-text">4.2 (54ä»¶)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- ä»–ã®ã‚¨ãƒªã‚¢ã®ã‚·ãƒ§ãƒƒãƒ—ãƒªã‚¹ãƒˆã‚‚åŒæ§˜ã«å®Ÿè£…ï¼ˆçœç•¥ï¼‰ -->
                    </div>
                </div>

                <!-- Step 2: ä½“é¨“å†…å®¹ -->
                <div class="form-step" id="step-2">
                    <div class="step-header">
                        <h2 class="step-title-main">ğŸ“… ä½“é¨“å†…å®¹ã‚’å…¥åŠ›</h2>
                        <p class="step-description">
                            ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ä½“é¨“ã®åŸºæœ¬æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
                        </p>
                    </div>

                    <div class="experience-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar"></i> ä½“é¨“æ—¥
                            </label>
                            <input type="date" class="form-input" id="experience-date" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-clock"></i> æ™‚é–“å¸¯
                            </label>
                            <select class="form-select" id="time-slot" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="morning">åˆå‰ï¼ˆ8:00-12:00ï¼‰</option>
                                <option value="afternoon">åˆå¾Œï¼ˆ13:00-17:00ï¼‰</option>
                                <option value="full-day">1æ—¥ï¼ˆ8:00-17:00ï¼‰</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-swimming-pool"></i> å‚åŠ ã‚³ãƒ¼ã‚¹
                            </label>
                            <select class="form-select" id="course-type" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="trial-beach">ä½“é¨“ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ï¼ˆãƒ“ãƒ¼ãƒï¼‰</option>
                                <option value="trial-boat">ä½“é¨“ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ï¼ˆãƒœãƒ¼ãƒˆï¼‰</option>
                                <option value="fun-dive">ãƒ•ã‚¡ãƒ³ãƒ€ã‚¤ãƒ“ãƒ³ã‚°</option>
                                <option value="license">ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è¬›ç¿’</option>
                                <option value="snorkel">ã‚·ãƒ¥ãƒãƒ¼ã‚±ãƒªãƒ³ã‚°</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-users"></i> å‚åŠ äººæ•°
                            </label>
                            <select class="form-select" id="participants" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="1">1åï¼ˆä¸€äººå‚åŠ ï¼‰</option>
                                <option value="2">2å</option>
                                <option value="3">3å</option>
                                <option value="4">4å</option>
                                <option value="5plus">5åä»¥ä¸Š</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-cloud-sun"></i> å½“æ—¥ã®å¤©å€™
                            </label>
                            <select class="form-select" id="weather" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="sunny">æ™´ã‚Œ</option>
                                <option value="cloudy">æ›‡ã‚Š</option>
                                <option value="rainy">é›¨</option>
                                <option value="partly-cloudy">æ™´ã‚Œæ™‚ã€…æ›‡ã‚Š</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-waves"></i> æµ·æ³
                            </label>
                            <select class="form-select" id="sea-condition" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="excellent">æœ€é«˜ï¼ˆç©ã‚„ã‹ï¼‰</option>
                                <option value="good">è‰¯å¥½</option>
                                <option value="fair">æ™®é€š</option>
                                <option value="rough">ã‚„ã‚„è’ã‚Œæ°—å‘³</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-map-marker-alt"></i> æ½œã£ãŸãƒã‚¤ãƒ³ãƒˆï¼ˆåˆ†ã‹ã‚‹ç¯„å›²ã§ï¼‰
                        </label>
                        <textarea class="form-textarea" id="dive-points" 
                                  placeholder="ä¾‹ï¼šãƒãƒ³ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ã€å·å¹³çŸ³å´ãªã©"></textarea>
                    </div>
                </div>

                <!-- Step 3: è©•ä¾¡ãƒ»ã‚¹ã‚³ã‚¢ -->
                <div class="form-step" id="step-3">
                    <div class="step-header">
                        <h2 class="step-title-main">â­ è©•ä¾¡ãƒ»ã‚¹ã‚³ã‚¢ã‚’å…¥åŠ›</h2>
                        <p class="step-description">
                            ä½“é¨“ã—ãŸå†…å®¹ã«ã¤ã„ã¦ã€5æ®µéšã§è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚<br>
                            æ­£ç›´ãªè©•ä¾¡ãŒä»–ã®åˆå¿ƒè€…ãƒ€ã‚¤ãƒãƒ¼ã®å‚è€ƒã«ãªã‚Šã¾ã™ã€‚
                        </p>
                    </div>

                    <div class="rating-section">
                        <!-- ç·åˆæº€è¶³åº¦ -->
                        <div class="rating-group">
                            <div class="rating-label">
                                <i class="fas fa-heart"></i> ç·åˆæº€è¶³åº¦
                            </div>
                            <div class="star-rating" data-rating="overall-satisfaction">
                                <span class="star" data-value="1">â˜…</span>
                                <span class="star" data-value="2">â˜…</span>
                                <span class="star" data-value="3">â˜…</span>
                                <span class="star" data-value="4">â˜…</span>
                                <span class="star" data-value="5">â˜…</span>
                            </div>
                            <div class="rating-description">å…¨ä½“çš„ãªæº€è¶³åº¦ã‚’ãŠèã‹ã›ãã ã•ã„</div>
                        </div>

                        <!-- åˆå¿ƒè€…å¯¾å¿œåº¦ -->
                        <div class="rating-group">
                            <div class="rating-label">
                                <i class="fas fa-graduation-cap"></i> åˆå¿ƒè€…å¯¾å¿œåº¦
                            </div>
                            <div class="star-rating" data-rating="beginner-support">
                                <span class="star" data-value="1">â˜…</span>
                                <span class="star" data-value="2">â˜…</span>
                                <span class="star" data-value="3">â˜…</span>
                                <span class="star" data-value="4">â˜…</span>
                                <span class="star" data-value="5">â˜…</span>
                            </div>
                            <div class="rating-description">åˆå¿ƒè€…ã¸ã®èª¬æ˜ã‚„é…æ…®ã¯ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿ</div>
                        </div>

                        <!-- å®‰å…¨æ€§ãƒ»ä¿¡é ¼åº¦ -->
                        <div class="rating-group">
                            <div class="rating-label">
                                <i class="fas fa-shield-alt"></i> å®‰å…¨æ€§ãƒ»ä¿¡é ¼åº¦
                            </div>
                            <div class="star-rating" data-rating="safety">
                                <span class="star" data-value="1">â˜…</span>
                                <span class="star" data-value="2">â˜…</span>
                                <span class="star" data-value="3">â˜…</span>
                                <span class="star" data-value="4">â˜…</span>
                                <span class="star" data-value="5">â˜…</span>
                            </div>
                            <div class="rating-description">å®‰å…¨é¢ã§ã®é…æ…®ã‚„å™¨æã®çŠ¶æ…‹ã¯ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿ</div>
                        </div>

                        <!-- ã‚¹ã‚¿ãƒƒãƒ•å¯¾å¿œ -->
                        <div class="rating-group">
                            <div class="rating-label">
                                <i class="fas fa-users"></i> ã‚¹ã‚¿ãƒƒãƒ•å¯¾å¿œãƒ»è¦ªåˆ‡åº¦
                            </div>
                            <div class="star-rating" data-rating="staff">
                                <span class="star" data-value="1">â˜…</span>
                                <span class="star" data-value="2">â˜…</span>
                                <span class="star" data-value="3">â˜…</span>
                                <span class="star" data-value="4">â˜…</span>
                                <span class="star" data-value="5">â˜…</span>
                            </div>
                            <div class="rating-description">ã‚¹ã‚¿ãƒƒãƒ•ã®æ¥å®¢ã‚„è¦ªåˆ‡ã•ã¯ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿ</div>
                        </div>

                        <!-- ä½“é¨“æº€è¶³åº¦ -->
                        <div class="rating-group">
                            <div class="rating-label">
                                <i class="fas fa-fish"></i> ä½“é¨“å†…å®¹ãƒ»æº€è¶³åº¦
                            </div>
                            <div class="star-rating" data-rating="experience">
                                <span class="star" data-value="1">â˜…</span>
                                <span class="star" data-value="2">â˜…</span>
                                <span class="star" data-value="3">â˜…</span>
                                <span class="star" data-value="4">â˜…</span>
                                <span class="star" data-value="5">â˜…</span>
                            </div>
                            <div class="rating-description">æµ·ã®ç¾ã—ã•ã‚„ç”Ÿç‰©ã¨ã®é­é‡ãªã©ã€ä½“é¨“å†…å®¹ã¯ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿ</div>
                        </div>

                        <!-- ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ -->
                        <div class="rating-group">
                            <div class="rating-label">
                                <i class="fas fa-yen-sign"></i> ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
                            </div>
                            <div class="star-rating" data-rating="cost-performance">
                                <span class="star" data-value="1">â˜…</span>
                                <span class="star" data-value="2">â˜…</span>
                                <span class="star" data-value="3">â˜…</span>
                                <span class="star" data-value="4">â˜…</span>
                                <span class="star" data-value="5">â˜…</span>
                            </div>
                            <div class="rating-description">æ–™é‡‘ã«å¯¾ã™ã‚‹æº€è¶³åº¦ã¯ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿ</div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: è©³ç´°ä½“é¨“è«‡ -->
                <div class="form-step" id="step-4">
                    <div class="step-header">
                        <h2 class="step-title-main">ğŸ“ è©³ç´°ä½“é¨“è«‡ã‚’å…¥åŠ›</h2>
                        <p class="step-description">
                            ä»–ã®åˆå¿ƒè€…ãƒ€ã‚¤ãƒãƒ¼ãŒå‚è€ƒã«ã§ãã‚‹ã€å…·ä½“çš„ãªä½“é¨“è«‡ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚<br>
                            è©³ã—ãæ›¸ãã»ã©ã€ã‚ˆã‚Šå¤šãã®ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã§ãã¾ã™ã€‚
                        </p>
                    </div>

                    <div class="review-content">
                        <div class="content-group">
                            <label class="form-label">
                                <i class="fas fa-thumbs-up"></i> è‰¯ã‹ã£ãŸç‚¹ãƒ»å°è±¡çš„ã ã£ãŸä½“é¨“
                            </label>
                            <textarea class="form-textarea" id="good-points" 
                                      placeholder="ä¾‹ï¼šã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã®æ–¹ãŒã¨ã¦ã‚‚è¦ªåˆ‡ã§ã€æ€–ãŒã‚Šãªç§ã«ã‚‚ä¸å¯§ã«æ•™ãˆã¦ãã ã•ã„ã¾ã—ãŸã€‚ãƒãƒ³ã‚¿ã«é­é‡ã§ãã¦æ„Ÿå‹•ã—ã¾ã—ãŸ..."
                                      maxlength="1000"></textarea>
                            <div class="char-counter">
                                <span id="good-points-count">0</span>/1000æ–‡å­—
                            </div>
                        </div>

                        <div class="content-group">
                            <label class="form-label">
                                <i class="fas fa-exclamation-triangle"></i> æ”¹å–„å¸Œæœ›ç‚¹ãƒ»æ³¨æ„ç‚¹ï¼ˆä»»æ„ï¼‰
                            </label>
                            <textarea class="form-textarea" id="improvement-points" 
                                      placeholder="ä¾‹ï¼šæ›´è¡£å®¤ãŒã‚‚ã†å°‘ã—åºƒã„ã¨è‰¯ã„ã¨æ€ã„ã¾ã—ãŸã€‚ç‰¹ã«å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒ..."
                                      maxlength="500"></textarea>
                            <div class="char-counter">
                                <span id="improvement-points-count">0</span>/500æ–‡å­—
                            </div>
                        </div>

                        <div class="content-group">
                            <label class="form-label">
                                <i class="fas fa-lightbulb"></i> åˆå¿ƒè€…ã¸ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼ˆä»»æ„ï¼‰
                            </label>
                            <textarea class="form-textarea" id="advice" 
                                      placeholder="ä¾‹ï¼šåˆå¿ƒè€…ã®æ–¹ã§ã‚‚å®‰å¿ƒã—ã¦å‚åŠ ã§ãã¾ã™ã€‚äº‹å‰ã«ä¸å®‰ãªã“ã¨ã¯é æ…®ãªãè³ªå•ã™ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™..."
                                      maxlength="500"></textarea>
                            <div class="char-counter">
                                <span id="advice-count">0</span>/500æ–‡å­—
                            </div>
                        </div>

                        <div class="content-group">
                            <label class="form-label">
                                <i class="fas fa-comment"></i> å…¨ä½“çš„ãªæ„Ÿæƒ³ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                            </label>
                            <textarea class="form-textarea" id="overall-message" 
                                      placeholder="ä¾‹ï¼šäººç”Ÿåˆã®ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã§ã—ãŸãŒã€ã“ã‚“ãªã«ç´ æ™´ã‚‰ã—ã„ä½“é¨“ãŒã§ãã‚‹ã¨ã¯æ€ã„ã¾ã›ã‚“ã§ã—ãŸã€‚æ²–ç¸„ã®æµ·ã®ç¾ã—ã•ã«æ„Ÿå‹•..."
                                      maxlength="1000"></textarea>
                            <div class="char-counter">
                                <span id="overall-message-count">0</span>/1000æ–‡å­—
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: ãƒ¡ãƒ‡ã‚£ã‚¢æŠ•ç¨¿ -->
                <div class="form-step" id="step-5">
                    <div class="step-header">
                        <h2 class="step-title-main">ğŸ“¸ å†™çœŸãƒ»å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h2>
                        <p class="step-description">
                            ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ä½“é¨“ã®å†™çœŸã‚„å‹•ç”»ãŒã‚ã‚Œã°ã€ãœã²æŠ•ç¨¿ã—ã¦ãã ã•ã„ã€‚<br>
                            å†™çœŸä»˜ãã§+50ãƒã‚¤ãƒ³ãƒˆã€å‹•ç”»ä»˜ãã§+100ãƒã‚¤ãƒ³ãƒˆç²å¾—ã§ãã¾ã™ï¼
                        </p>
                    </div>

                    <div class="media-upload">
                        <!-- å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
                        <div class="upload-section">
                            <h3 style="margin-bottom: 20px; color: #1f2937; font-weight: 600;">
                                <i class="fas fa-camera"></i> å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆæœ€å¤§10æšï¼‰
                            </h3>
                            <div class="upload-area" id="photo-upload-area">
                                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                <div class="upload-text">å†™çœŸã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ— ã¾ãŸã¯ ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</div>
                                <div class="upload-hint">JPG, PNGå½¢å¼ï¼ˆå„5MBã¾ã§ï¼‰</div>
                                <input type="file" class="file-input" id="photo-input" 
                                       accept="image/*" multiple>
                            </div>
                            <div class="uploaded-files" id="uploaded-photos"></div>
                        </div>

                        <!-- å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
                        <div class="upload-section">
                            <h3 style="margin-bottom: 20px; color: #1f2937; font-weight: 600;">
                                <i class="fas fa-video"></i> å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆæœ€å¤§3åˆ†ï¼‰
                            </h3>
                            <div class="upload-area" id="video-upload-area">
                                <i class="fas fa-film upload-icon"></i>
                                <div class="upload-text">å‹•ç”»ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ— ã¾ãŸã¯ ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</div>
                                <div class="upload-hint">MP4, MOVå½¢å¼ï¼ˆ50MBã¾ã§ã€3åˆ†ä»¥å†…ï¼‰</div>
                                <input type="file" class="file-input" id="video-input" 
                                       accept="video/*">
                            </div>
                            <div class="uploaded-files" id="uploaded-videos"></div>
                        </div>
                    </div>

                    <!-- ãƒã‚¤ãƒ³ãƒˆç²å¾—äºˆå®š -->
                    <div class="points-preview">
                        <div class="points-title">ğŸ ç²å¾—äºˆå®šãƒã‚¤ãƒ³ãƒˆ</div>
                        <div class="points-amount" id="total-points">150</div>
                        <div class="points-breakdown" id="points-breakdown">
                            åŸºæœ¬æŠ•ç¨¿: 100P + å†™çœŸæŠ•ç¨¿: 50P = 150P<br>
                            â€»é«˜å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å ´åˆã€è¿½åŠ ãƒœãƒ¼ãƒŠã‚¹ãŒã¤ãå ´åˆãŒã‚ã‚Šã¾ã™
                        </div>
                    </div>
                </div>

                <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-prev" id="prev-btn" style="display: none;">
                        <i class="fas fa-chevron-left"></i> å‰ã¸
                    </button>
                    
                    <div style="flex: 1;"></div>
                    
                    <button type="button" class="btn-nav btn-next" id="next-btn">
                        æ¬¡ã¸ <i class="fas fa-chevron-right"></i>
                    </button>
                    
                    <button type="submit" class="btn-nav btn-submit" id="submit-btn" style="display: none;">
                        <i class="fas fa-paper-plane"></i> å£ã‚³ãƒŸã‚’æŠ•ç¨¿ã™ã‚‹
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ğŸŒŠ Jijiä¼šå“¡ã‚·ã‚¹ãƒ†ãƒ </h3>
                    <p>å£ã‚³ãƒŸã§ã¤ãªãŒã‚‹ã€ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</p>
                </div>
                
                <div class="footer-section">
                    <h3>ä¼šå“¡ã‚µãƒ¼ãƒ“ã‚¹</h3>
                    <ul>
                        <li><a href="/member">ãƒã‚¤ãƒšãƒ¼ã‚¸</a></li>
                        <li><a href="/member/review-post">å£ã‚³ãƒŸæŠ•ç¨¿</a></li>
                        <li><a href="/member/points">ãƒã‚¤ãƒ³ãƒˆç®¡ç†</a></li>
                        <li><a href="/member/settings">è¨­å®š</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>ã‚µãƒãƒ¼ãƒˆ</h3>
                    <ul>
                        <li><a href="https://line.me/ti/p/@2007331165" target="_blank">LINE Botç›¸è«‡</a></li>
                        <li><a href="/contact">ãŠå•ã„åˆã‚ã›</a></li>
                        <li><a href="/help">ãƒ˜ãƒ«ãƒ—</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Jijiä¼šå“¡ã‚·ã‚¹ãƒ†ãƒ  - å£ã‚³ãƒŸé‡è¦–ãƒ€ã‚¤ãƒ“ãƒ³ã‚°æ”¯æ´</p>
            </div>
        </div>
    </footer>

    <script>
        // ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†
        const formState = {
            currentStep: 1,
            totalSteps: 5,
            data: {},
            uploadedPhotos: [],
            uploadedVideos: []
        };

        // DOMè¦ç´ 
        const stepIndicators = document.querySelectorAll('[id^="step-indicator-"]');
        const formSteps = document.querySelectorAll('.form-step');
        const progressBar = document.getElementById('progress-bar');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateUI();
            setupFileUpload();
            setupCharCounters();
            setupStarRatings();
        });

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
            prevBtn.addEventListener('click', previousStep);
            nextBtn.addEventListener('click', nextStep);
            submitBtn.addEventListener('click', submitReview);

            // ã‚¨ãƒªã‚¢ã‚¿ãƒ–
            document.querySelectorAll('.area-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    selectArea(this.dataset.area);
                });
            });

            // ã‚·ãƒ§ãƒƒãƒ—æ¤œç´¢
            document.getElementById('shop-search').addEventListener('input', searchShops);

            // ã‚·ãƒ§ãƒƒãƒ—é¸æŠ
            document.querySelectorAll('input[name="selected-shop"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.checked) {
                        formState.data.selectedShop = this.value;
                        updateUI();
                    }
                });
            });
        }

        // UIæ›´æ–°
        function updateUI() {
            // ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼æ›´æ–°
            stepIndicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index + 1 === formState.currentStep);
            });

            // ãƒ•ã‚©ãƒ¼ãƒ ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º
            formSteps.forEach((step, index) => {
                step.classList.toggle('active', index + 1 === formState.currentStep);
            });

            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
            const progress = (formState.currentStep / formState.totalSteps) * 100;
            progressBar.style.width = `${progress}%`;

            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³è¡¨ç¤ºåˆ¶å¾¡
            prevBtn.style.display = formState.currentStep === 1 ? 'none' : 'flex';
            nextBtn.style.display = formState.currentStep === formState.totalSteps ? 'none' : 'flex';
            submitBtn.style.display = formState.currentStep === formState.totalSteps ? 'flex' : 'none';
        }

        // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
        function nextStep() {
            if (validateCurrentStep()) {
                formState.currentStep++;
                updateUI();
                scrollToTop();
            }
        }

        // å‰ã®ã‚¹ãƒ†ãƒƒãƒ—
        function previousStep() {
            formState.currentStep--;
            updateUI();
            scrollToTop();
        }

        // ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        function validateCurrentStep() {
            switch (formState.currentStep) {
                case 1:
                    if (!formState.data.selectedShop) {
                        alert('ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚·ãƒ§ãƒƒãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                        return false;
                    }
                    break;
                case 2:
                    const requiredFields = ['experience-date', 'time-slot', 'course-type', 'participants', 'weather', 'sea-condition'];
                    for (const field of requiredFields) {
                        if (!document.getElementById(field).value) {
                            alert('å¿…é ˆé …ç›®ã‚’ã™ã¹ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                            return false;
                        }
                    }
                    break;
                case 3:
                    if (!validateRatings()) {
                        alert('ã™ã¹ã¦ã®è©•ä¾¡é …ç›®ã«æ˜Ÿè©•ä¾¡ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚');
                        return false;
                    }
                    break;
                case 4:
                    if (!document.getElementById('good-points').value.trim()) {
                        alert('ã€Œè‰¯ã‹ã£ãŸç‚¹ãƒ»å°è±¡çš„ã ã£ãŸä½“é¨“ã€ã¯å¿…é ˆå…¥åŠ›ã§ã™ã€‚');
                        return false;
                    }
                    break;
            }
            return true;
        }

        // è©•ä¾¡ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        function validateRatings() {
            const ratingGroups = document.querySelectorAll('.star-rating');
            for (const group of ratingGroups) {
                if (!group.dataset.selectedValue) {
                    return false;
                }
            }
            return true;
        }

        // ã‚¨ãƒªã‚¢é¸æŠ
        function selectArea(area) {
            document.querySelectorAll('.area-tab').forEach(tab => {
                tab.classList.toggle('selected', tab.dataset.area === area);
            });
            
            document.querySelectorAll('.shop-list').forEach(list => {
                list.classList.toggle('active', list.id === `shops-${area}`);
            });
        }

        // ã‚·ãƒ§ãƒƒãƒ—æ¤œç´¢
        function searchShops(event) {
            const query = event.target.value.toLowerCase();
            const activeShopList = document.querySelector('.shop-list.active');
            const shopItems = activeShopList.querySelectorAll('.shop-item');

            shopItems.forEach(item => {
                const shopName = item.querySelector('h4').textContent.toLowerCase();
                const isMatch = shopName.includes(query);
                item.style.display = isMatch ? 'block' : 'none';
            });
        }

        // æ˜Ÿè©•ä¾¡è¨­å®š
        function setupStarRatings() {
            document.querySelectorAll('.star-rating').forEach(rating => {
                const stars = rating.querySelectorAll('.star');
                
                stars.forEach(star => {
                    star.addEventListener('click', function() {
                        const value = parseInt(this.dataset.value);
                        rating.dataset.selectedValue = value;
                        
                        stars.forEach((s, index) => {
                            s.classList.toggle('active', index < value);
                        });
                    });
                    
                    star.addEventListener('mouseenter', function() {
                        const value = parseInt(this.dataset.value);
                        stars.forEach((s, index) => {
                            s.style.color = index < value ? '#fbbf24' : '#d1d5db';
                        });
                    });
                });
                
                rating.addEventListener('mouseleave', function() {
                    const selectedValue = parseInt(rating.dataset.selectedValue) || 0;
                    stars.forEach((s, index) => {
                        s.style.color = index < selectedValue ? '#fbbf24' : '#d1d5db';
                    });
                });
            });
        }

        // æ–‡å­—ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®š
        function setupCharCounters() {
            const textareas = [
                { id: 'good-points', counterId: 'good-points-count' },
                { id: 'improvement-points', counterId: 'improvement-points-count' },
                { id: 'advice', counterId: 'advice-count' },
                { id: 'overall-message', counterId: 'overall-message-count' }
            ];

            textareas.forEach(({ id, counterId }) => {
                const textarea = document.getElementById(id);
                const counter = document.getElementById(counterId);
                
                if (textarea && counter) {
                    textarea.addEventListener('input', function() {
                        counter.textContent = this.value.length;
                    });
                }
            });
        }

        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è¨­å®š
        function setupFileUpload() {
            // å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
            setupSingleFileUpload('photo-upload-area', 'photo-input', 'uploaded-photos', 'image', 10);
            
            // å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
            setupSingleFileUpload('video-upload-area', 'video-input', 'uploaded-videos', 'video', 1);
        }

        function setupSingleFileUpload(areaId, inputId, containerId, type, maxFiles) {
            const uploadArea = document.getElementById(areaId);
            const fileInput = document.getElementById(inputId);
            const container = document.getElementById(containerId);

            uploadArea.addEventListener('click', () => fileInput.click());
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('drop', (e) => handleDrop(e, type, maxFiles, container));
            
            fileInput.addEventListener('change', (e) => handleFileSelect(e, type, maxFiles, container));
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDrop(e, type, maxFiles, container) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = Array.from(e.dataTransfer.files);
            processFiles(files, type, maxFiles, container);
        }

        function handleFileSelect(e, type, maxFiles, container) {
            const files = Array.from(e.target.files);
            processFiles(files, type, maxFiles, container);
        }

        function processFiles(files, type, maxFiles, container) {
            const currentCount = container.children.length;
            const allowedCount = Math.min(files.length, maxFiles - currentCount);
            
            for (let i = 0; i < allowedCount; i++) {
                const file = files[i];
                
                if (type === 'image' && file.type.startsWith('image/')) {
                    addFilePreview(file, container, 'image');
                } else if (type === 'video' && file.type.startsWith('video/')) {
                    addFilePreview(file, container, 'video');
                }
            }
            
            updatePointsPreview();
        }

        function addFilePreview(file, container, type) {
            const fileDiv = document.createElement('div');
            fileDiv.className = 'uploaded-file';
            
            const preview = document.createElement(type === 'image' ? 'img' : 'video');
            preview.className = 'file-preview';
            
            if (type === 'image') {
                preview.src = URL.createObjectURL(file);
                preview.alt = file.name;
            } else {
                preview.src = URL.createObjectURL(file);
                preview.controls = true;
            }
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'file-remove';
            removeBtn.innerHTML = 'Ã—';
            removeBtn.addEventListener('click', () => {
                container.removeChild(fileDiv);
                updatePointsPreview();
            });
            
            fileDiv.appendChild(preview);
            fileDiv.appendChild(removeBtn);
            container.appendChild(fileDiv);
        }

        // ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—æ›´æ–°
        function updatePointsPreview() {
            const photoCount = document.getElementById('uploaded-photos').children.length;
            const videoCount = document.getElementById('uploaded-videos').children.length;
            
            let points = 100; // åŸºæœ¬æŠ•ç¨¿
            let breakdown = 'åŸºæœ¬æŠ•ç¨¿: 100P';
            
            if (photoCount > 0) {
                points += 50;
                breakdown += ' + å†™çœŸæŠ•ç¨¿: 50P';
            }
            
            if (videoCount > 0) {
                points += 100;
                breakdown += ' + å‹•ç”»æŠ•ç¨¿: 100P';
            }
            
            document.getElementById('total-points').textContent = points;
            document.getElementById('points-breakdown').innerHTML = 
                breakdown + ` = ${points}P<br>â€»é«˜å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å ´åˆã€è¿½åŠ ãƒœãƒ¼ãƒŠã‚¹ãŒã¤ãå ´åˆãŒã‚ã‚Šã¾ã™`;
        }

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
        function submitReview() {
            if (!validateCurrentStep()) return;
            
            // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿åé›†
            const reviewData = collectFormData();
            
            // é€ä¿¡å‡¦ç†ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯APIã«é€ä¿¡ï¼‰
            console.log('é€ä¿¡ãƒ‡ãƒ¼ã‚¿:', reviewData);
            
            // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
            alert('å£ã‚³ãƒŸã®æŠ•ç¨¿ãŒå®Œäº†ã—ã¾ã—ãŸï¼ãƒã‚¤ãƒ³ãƒˆãŒä»˜ä¸ã•ã‚Œã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼');
            
            // ãƒã‚¤ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
            window.location.href = '/member';
        }

        function collectFormData() {
            return {
                shopId: formState.data.selectedShop,
                experienceDate: document.getElementById('experience-date').value,
                timeSlot: document.getElementById('time-slot').value,
                courseType: document.getElementById('course-type').value,
                participants: document.getElementById('participants').value,
                weather: document.getElementById('weather').value,
                seaCondition: document.getElementById('sea-condition').value,
                divePoints: document.getElementById('dive-points').value,
                ratings: collectRatings(),
                goodPoints: document.getElementById('good-points').value,
                improvementPoints: document.getElementById('improvement-points').value,
                advice: document.getElementById('advice').value,
                overallMessage: document.getElementById('overall-message').value,
                photoCount: document.getElementById('uploaded-photos').children.length,
                videoCount: document.getElementById('uploaded-videos').children.length
            };
        }

        function collectRatings() {
            const ratings = {};
            document.querySelectorAll('.star-rating').forEach(rating => {
                const key = rating.dataset.rating;
                const value = parseInt(rating.dataset.selectedValue) || 0;
                ratings[key] = value;
            });
            return ratings;
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>